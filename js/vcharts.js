/**
 * VCharts v1.0.0
 * @license MIT (c) 2013 vcharts.cn/license
 */
(function(t){var i={};var e=function(){function t(){}return function(i,e){var a,r,s=i.prototype;t.prototype=e.prototype;r=i.prototype=new t;for(a in s){r[a]=s[a]}i.prototype.constructor=i;i.superClass=e.prototype;return i}}();function a(t,i){for(var e in i){t[e]=i[e]}return t}var r=document,s=t,h=navigator,n="0.4.3",o=navigator.userAgent,l=s.opera,c=/msie/i.test(o)&&!l,f="http://www.w3.org/2000/svg",u=!!r.createElementNS&&!!r.createElementNS(f,"svg").createSVGRect,d=null;function p(t){return typeof t==="string"}function g(t){var i=null;var e=_(t);if(e&&e.nodeName=="OBJECT"){if(typeof e.SetVariable!=UNDEF){i=e}else{var a=e.getElementsByTagName(OBJECT)[0];if(a){i=a}}}return i}function _(t){var i=null;try{i=r.getElementById(t)}catch(e){}return i}function v(t,i){for(var e in i){t.setAttribute(e,i[e])}}var m=a;function b(t){var i=t.offsetLeft;var e=t.offsetParent;while(e!=null){i+=e.offsetLeft;e=e.offsetParent}return i}function x(t){var i=t.offsetTop;var e=t.offsetParent;while(e!=null){i+=e.offsetTop;e=e.offsetParent}return i}function C(t){var i=r.documentElement.scrollTop;var e=r.documentElement.scrollLeft;if(t.getBoundingClientRect){if(typeof arguments.callee.offset!="number"){var a=r.createElement("div");a.style.cssText="position:absolute;left:0;top:0;";r.body.appendChild(a);arguments.callee.offset=-a.getBoundingClientRect().top-i;document.body.removeChild(a);a=null}var s=t.getBoundingClientRect();var h=arguments.callee.offset;return{x:s.left+h,y:s.top+h,left:s.left+h,right:s.right+h,top:s.top+h,bottom:s.bottom+h,width:s.right-s.left,height:s.bottom-s.top}}else{var n=b(t);var o=x(t);return{x:n-e,y:o-i,left:n-e,right:n+t.offsetWidth-e,top:o-i,bottom:o+t.offsetHeight-i,width:t.offsetWidth,height:t.offsetHeight}}}function y(t){var i=t.getBoundingClientRect();var e={left:i.left,top:i.top,right:i.right,bottom:i.bottom,width:i.right-i.left,height:i.bottom-i.top};return e}var w=d={type:"svg",_newNode:function(t){var i=r.createElementNS(f,t);return i},newDocument:function(t){var i=this._newNode("svg");i.style.position="relative";i.style.width="100%";i.style.height="100%";v(i,{version:"1.1"});if(t)i.appendChild(this._newNode("desc")).appendChild(r.createTextNode(t));return i},newGroup:function(){var t=this._newNode("g");return t},newPath:function(){var t=this._newNode("path");t.style.fillRule="evenodd";return t},newText:function(){var t=this._newNode("text");var i={"font-family":"Verdana, Console, Arial, 微软雅黑, 宋体","font-size":12,fill:"#666666","text-anchor":"start"};v(t,i);return t},setAttr:function(t){var i=t._dom,e=[];var a={};a["visibility"]=t.visible?"visible":"hidden";if(t._alpha!=t.alpha){a["opacity"]=t.alpha}if(t._x!=t.x||t._y!=t.y){e.push("translate("+t.x+", "+t.y+")")}if(t._rotate!=t.rotation){e.push("rotate("+t.rotation+")")}if(e.length>0){a["transform"]=e.join(" ")}if(t.mask){a["clip-path"]="url(#"+t.mask.id+")"}v(i,a)},getRect:function(t){var i=t._dom.getBoundingClientRect();var e={x:t.x,y:t.y,left:i.left,right:i.right,top:i.top,bottom:i.bottom,width:i.width,height:i.height};return e},draw:function(t){var i={stroke:t._drawLine?t.lineColor:"none","stroke-dasharray":t.lineDash?5:"none","stroke-width":t.lineWidth,"stroke-opacity":t.lineAlpha,fill:t._drawFill?t.fillColor:"none","fill-opacity":t.fillAlpha};if(t.gradientType=="linear"||t.gradientType=="rad"){if(t.gradientType=="linear"){var e=t.appendChild(this._newNode("linearGradient"))}for(var a=0;a<t.colors.length;a++){var r=e.appendChild(this._newNode("stop"));v(r,{offset:t.ratios[a]*100+"%","stop-color":t.colors[a],"stop-opacity":t.alphas[a]})}}v(t._dom,{d:t.dataArr.join(" ")});v(t._dom,i)},curveTo:function(t,i,e,a,r,s){var h=["C",t,i,e,a,r,s];return h},arc:function(t,i,e,a,r,s,h){var n=e,o=a,l=r,c=t+Math.cos(o)*n,f=i+Math.sin(o)*n,u=t+Math.cos(l)*n,d=i+Math.sin(l)*n,p=Math.abs(r-a)>Math.PI?1:0,g=s?0:1;var _=[h?"M":"L",c,f,"A",n,n,0,p,g,u,d];return _},circle:function(t,i,e){var a=e,r;r=["M",t+a,i,"a",a,a,0,0,1,-2*a,0,"a",a,a,0,0,1,2*a,0];return r},rect:function(t,i,e,a,r){var s=e,h=a,n=Math.min(s,h),o=Math.min(n/2,r),l;if(o>0){var c=s-o*2,f=h-o*2;l=["M",t+o,i,"h",c,"q",o,0,o,o,"v",f,"q",0,o,-o,o,"h",-c,"q",-o,0,-o,-o,"v",-f,"q",0,-o,o,-o]}else{l=["M",t,i,"h",s,"v",h,"h",-s,"v",-h]}return l},setText:function(t){var i=t._dom,e=t.fontSize,a=Math.max(-t.fontSize,t.lineHeight),s=t.text.split(/<br>/gi);for(var h=0;h<s.length;h++){var n=i.childNodes[h];if(n){n.firstChild.nodeValue=s[h]}else{n=this._newNode("tspan");var o=n.appendChild(r.createTextNode(s[h]));i.appendChild(n)}v(n,{"font-size":e,x:0,y:h*(e+a),dy:e})}while(i.childNodes.length>h){i.removeChild(i.lastChild)}},setTextFormat:function(t){var i=t._dom;var e={"font-family":t.font,"letter-spacing":t.letterSpacing,fill:t.color};v(i,e)}};var A={type:"vml",_newNode:function(t){var i="<v:"+t;if(P){i+=' style="behavior:url(#default#VML);display:inline-block;"'}i+=" />";var e=r.createElement(i);e.style.position="absolute";return e},_newSubNode:function(t){var i="<v:"+t;if(P){i+=' style="behavior:url(#default#VML);"'}i+=" />";var e=r.createElement(i);return e},newDocument:function(){var t=this._newNode("g");t.style.position="relative";t.style.width="100%";t.style.height="100%";return t},newGroup:function(){var t=this._newNode("g");return t},newPath:function(){var t=this._newNode("shape");t.coordsize="1, 1";t.style.width="1px";t.style.height="1px";return t},newText:function(){var t=r.createElement("div");t.style.position="absolute";t.style.whiteSpace="nowrap";return t},setAttr:function(t){var i=t._dom,e=i.style;e.left=t.x;e.top=t.y;e.rotation=t.rotation;e.visibility=t.visible?"visible":"hidden"},getRect:function(t){var i=t._dom,e=i.getBoundingClientRect();var a={x:t.x,y:t.y,left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.right-e.left,height:e.bottom-e.top};return a},draw:function(t){var i=t._dom;i.stroked=t._drawLine;i.filled=t._drawFill;if(t._drawLine){t.stroke=t.stroke||this._newSubNode("stroke");t.stroke.opacity=t.lineAlpha;t.stroke.weight=t.lineWidth;t.stroke.color=t.lineColor;t.stroke.dashStyle=t.lineDash?"dash":"solid";i.appendChild(t.stroke)}else{if(t.stroke&&i.contains(t.stroke)){i.removeChild(t.stroke)}}if(t._drawFill){t.fill=t.fill||this._newSubNode("fill");t.fill.opacity=t.fillAlpha;t.fill.color=t.fillColor;i.appendChild(t.fill)}else{if(t.fill&&i.contains(t.fill)){i.removeChild(t.fill)}}for(var e in t.dataArr){if(typeof t.dataArr[e]==="number"){t.dataArr[e]=Math.round(t.dataArr[e])}}i.path=t.dataArr.join(" ")},curveTo:function(t,i,e,a,r,s){var h=["c",t,i,e,a,r,s];return h},arc:function(t,i,e,a,r,s,h){var n=e,o=a,l=r,c=t+Math.cos(o)*n,f=i+Math.sin(o)*n,u=t+Math.cos(l)*n,d=i+Math.sin(l)*n;var p=[s?h?"ar":"at":h?"wr":"wa",t-n,i-n,t+n,i+n,c,f,u,d];return p},circle:function(t,i,e){var a=e,r;r=["wr",t-a,i-a,t+a,i+a,t+a,i,t+a,i,"x"];return r},rect:function(t,i,e,a,r){var s=e,h=a,n=Math.min(s,h),o=Math.min(n/2,r),l;if(o>0){l=["M",t+o,i,"L",t+s-o,i,"QX",t+s,i+o,"L",t+s,i+h-o,"QY",t+s-o,i+h,"L",t+o,i+h,"QX",t,i+h-o,"L",t,i+o,"QY",t+o,i]}else{l=["M",t,i,"L",t+s,i,"L",t+s,i+h,"L",t,i+h,"L",t,i]}return l},setText:function(t){var i=t._dom,e=t.fontSize,a=3,s=t.text.split(/<br>/gi);for(var h=0;h<s.length;h++){var n=i.childNodes[h];if(n){n.firstChild.nodeValue=s[h]}else{n=r.createElement("p");n.appendChild(r.createTextNode(s[h]));i.appendChild(n)}n.style.position="static";n.style.margin="0 0"}while(i.childNodes.length>h){i.removeChild(i.lastChild)}},setTextFormat:function(t){var i=t._dom,e=i.style;e.letterSpacing=t.letterSpacing;e.lineHeight=Math.max(t.fontSize+t.lineHeight,0)+"px";e.fontFamily=t.font;e.fontSize=t.fontSize;e.color=t.color}};var M="M",I="L",S="C",k="Q",L="A",T="Z";if(u){d=w}else if(c){var P=o.indexOf("MSIE 8.0")>-1;if(!r.namespaces.v){document.namespaces.add("v","urn:schemas-microsoft-com:vml");document.createStyleSheet().cssText="v\\: * { behavior:url(#default#VML); display: inline-block; } "}k="qb";L="ar";T="x";a(d,A)}else{throw"抱歉，vcharts不支持此浏览器！"}var O=function(t,i){this.x=t==null?0:t;this.y=i==null?0:i};a(O.prototype,{clone:function(){return new O(this.x,this.y)}});var N=function(t,i,e,a){this.left=t==null?0:t;this.top=i==null?0:i;this.right=e==null?0:e;this.bottom=a==null?0:a};a(N.prototype,{check:function(){if(this.right<this.left)this.right=this.left;if(this.bottom<this.top)this.bottom=this.top},getWidth:function(){return this.right-this.left},getHeight:function(){return this.bottom-this.top},clone:function(){return new N(this.left,this.top,this.right,this.bottom)}});var D={createHueColors:function(t){var i=[];var e=360/t;for(var a=0;a<t;a++){i.push(D.toString(D.fromHSB(a*e,70,90)))}return i},fromString:function(t){if(!t){return 0}else{var i=t.match(/[0-9a-fA-F]{6}/g);if(i.length)return parseInt(i[0],16)}return 0},fromRGB:function(t,i,e){return t<<16|i<<8|e},fromHSB:function(t,i,e){var a,r,s;var h,n,o;var l,c,f,u,d;a=t/360;r=i/100;s=e/100;if(i==0){h=s*255;n=s*255;o=s*255}else{l=a*6;if(l==6)l=0;c=l;f=s*(1-r);u=s*(1-r*(l-c));d=s*(1-r*(1-(l-c)));if(c==0){h=s;n=d;o=f}else if(c==1){h=u;n=s;o=f}else if(c==2){h=f;n=s;o=d}else if(c==3){h=f;n=u;o=s}else if(c==4){h=d;n=f;o=s}else{h=s;n=f;o=u}}return h*255<<16|n*255<<8|o*255},adjustBrightness:function(t,i){t=D.fromString(t);var e=Math.max(Math.min((t>>16&255)+i,255),0);var a=Math.max(Math.min((t>>8&255)+i,255),0);var r=Math.max(Math.min((t&255)+i,255),0);return D.toString(D.fromRGB(e,a,r))},toString:function(t){var t=t.toString(16);while(t.length<6){t="0"+t}return"#"+t}};var j={addHandler:function(t,i,e){if(t.addEventListener){t.addEventListener(i,e,false)}else if(t.attachEvent){t.attachEvent("on"+i,e)}else{t["on"+i]=e}},removeHandler:function(t,i,e){if(t.removeEventListener){t.removeEventListener(i,e,false)}else if(t.detachEvent){t.detachEvent("on"+i,e)}else{t["on"+i]=null}},getEvent:function(t){t=t||s.event;if(!s.addEventListener&&s.attachEvent){i.event=i.event||{};t=a(i.event,t)}return t},getTarget:function(t){return t.target||t.srcElement},preventDefault:function(t){if(t.preventDefault){t.preventDefault()}else{t.returnValue=false}},stopPropagation:function(t){if(t.stopPropagation){t.stopPropagation()}else{t.cancelBubble=true}}};var R={roundToPrecision:function(t,i){var e=Math.pow(10,i||0);return Math.round(e*t)/e},roundPath:function(t){return t.replace(/[-+]?\d*\.?\d+/g,function(){return Math.round(Number(arguments[0]))})}};var E=function(){throw"Ease cannot be instantiated."};E.linear=function(t){return t};E.none=E.linear;E.get=function(t){if(t<-1){t=-1}if(t>1){t=1}return function(i){if(t==0){return i}if(t<0){return i*(i*-t+1+t)}return i*((2-i)*t+(1-t))}};E.getPowIn=function(t){return function(i){return Math.pow(i,t)}};E.getPowOut=function(t){return function(i){return 1-Math.pow(1-i,t)}};E.getPowInOut=function(t){return function(i){if((i*=2)<1)return.5*Math.pow(i,t);return 1-.5*Math.abs(Math.pow(2-i,t))}};E.quadIn=E.getPowIn(2);E.quadOut=E.getPowOut(2);E.quadInOut=E.getPowInOut(2);E.cubicIn=E.getPowIn(3);E.cubicOut=E.getPowOut(3);E.cubicInOut=E.getPowInOut(3);E.quartIn=E.getPowIn(4);E.quartOut=E.getPowOut(4);E.quartInOut=E.getPowInOut(4);E.quintIn=E.getPowIn(5);E.quintOut=E.getPowOut(5);E.quintInOut=E.getPowInOut(5);E.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)};E.sineOut=function(t){return Math.sin(t*Math.PI/2)};E.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)};E.getBackIn=function(t){return function(i){return i*i*((t+1)*i-t)}};E.backIn=E.getBackIn(1.7);E.getBackOut=function(t){return function(i){return--i*i*((t+1)*i+t)+1}};E.backOut=E.getBackOut(1.7);E.getBackInOut=function(t){t*=1.525;return function(i){if((i*=2)<1)return.5*i*i*((t+1)*i-t);return.5*((i-=2)*i*((t+1)*i+t)+2)}};E.backInOut=E.getBackInOut(1.7);E.circIn=function(t){return-(Math.sqrt(1-t*t)-1)};E.circOut=function(t){return Math.sqrt(1- --t*t)};E.circInOut=function(t){if((t*=2)<1)return-.5*(Math.sqrt(1-t*t)-1);return.5*(Math.sqrt(1-(t-=2)*t)+1)};E.bounceIn=function(t){return 1-E.bounceOut(1-t)};E.bounceOut=function(t){if(t<1/2.75){return 7.5625*t*t}else if(t<2/2.75){return 7.5625*(t-=1.5/2.75)*t+.75}else if(t<2.5/2.75){return 7.5625*(t-=2.25/2.75)*t+.9375}else{return 7.5625*(t-=2.625/2.75)*t+.984375}};E.bounceInOut=function(t){if(t<.5)return E.bounceIn(t*2)*.5;return E.bounceOut(t*2-1)*.5+.5};E.getElasticIn=function(t,i){var e=Math.PI*2;return function(a){if(a==0||a==1)return a;var r=i/e*Math.asin(1/t);return-(t*Math.pow(2,10*(a-=1))*Math.sin((a-r)*e/i))}};E.elasticIn=E.getElasticIn(1,.3);E.getElasticOut=function(t,i){var e=Math.PI*2;return function(a){if(a==0||a==1)return a;var r=i/e*Math.asin(1/t);return t*Math.pow(2,-10*a)*Math.sin((a-r)*e/i)+1}};E.elasticOut=E.getElasticOut(1,.3);E.getElasticInOut=function(t,i){var e=Math.PI*2;return function(a){var r=i/e*Math.asin(1/t);if((a*=2)<1)return-.5*t*Math.pow(2,10*(a-=1))*Math.sin((a-r)*e/i);return t*Math.pow(2,-10*(a-=1))*Math.sin((a-r)*e/i)*.5+1}};E.elasticInOut=E.getElasticInOut(1,.3*1.5);var V=function(){this._motionID=-1;this._dur=1;this._timeRate=20;this._motionCount=0;this._ease=E.cubicOut};V.to=function(t,i,e,a){var r=new V;r._target=t;r._dur=i;r._parsePara(e);this._ease=a||E.cubicOut;V.__replace(r);V.__list.push(r);r.start();return r};V.__list=[];V.__replace=function(t){for(var i in V.__list){var e=V.__list[i];if(e._target==t._target){for(var a in t._para){delete e._para[a]}}}};a(V.prototype,{_parsePara:function(t){this._updateParams=[];this._para={};for(var i in t){var e=t[i];switch(i){case"onUpdate":this._updateFun=e;break;case"onUpdateParams":this._updateParams=e;break;default:this._para[i]=[this._target[i],e];break}}},start:function(){var t=1e3/this._timeRate;this._motionCount=0;this._motionTotal=Math.ceil(this._dur*1e3/t);var i=this;this._motionID=setInterval(function(){if(i._motionCount++>=i._motionTotal){clearInterval(i._motionID);for(var t in V.__list){if(V.__list[t]==i){V.__list.splice(t,1)}}}else{i.__onUpdate()}},t)},__onUpdate:function(){for(var t in this._para){var i=this._para[t];var e=this._ease(this._motionCount/this._motionTotal)*(i[1]-i[0]);this._target[t]=i[0]+e}this._target[this._updateFun].apply(this._target,this._updateParams)},__onComplete:function(){}});var G={title:{display:false,text:"vcharts",font:"微软雅黑, 黑体, Verdana, Arial, Console",size:20,color:"#333333",offset:12},graph:{display:true,name:"某数据",lineThickness:2,lineAlpha:1,lineColor:null,fillColor:null,fillAlpha:1},pieGraph:{type:"slice",radius:100,innerRadius:.3,gap:0},serialGraph:{useDifferentColor:false,valueKey:"value",maxBarWidth:50},xyGraph:{xKey:"x",yKey:"y"},axis:{display:true,offset:0,axisThickness:1,axisColor:"#333333",gridThickness:1,gridColor:"#333333",gridType:"line",tickLength:5,titleText:"",titleOffset:0,labelColor:"#777777",labelFont:"微软雅黑, 黑体, Verdana, Arial, Console",labelSize:12,labelInside:false,labelFormatter:function(t){return t},labelPosition:"middle",labelOffset:8,labelRotation:0,opposite:false},serialAxis:{},valueAxis:{valueKeys:"auto",minValue:NaN,maxValue:NaN,autoGridCount:true,gridCount:5,onlyInteger:false,unit:"",unitPosition:"right"},plot:{display:true,backgroundColor:"#ffffff",backgroundAlpha:1,borderThickness:1,borderColor:"#cacaca",borderAlpha:1},legend:{display:false,margin:10,offset:10,lineAlpha:1,lineThickness:1,lineColor:null,lineAlpha:1},tooltip:{display:true,type:"auto",text:"",font:"微软雅黑, 黑体, Verdana, Arial, Console",size:12,color:"#777777",lineThickness:1,lineColor:"#333333",lineAlpha:.5,backgroundAlpha:.8,backgroundColor:"#ffffff",borderThickness:2,borderColor:"#333333",borderAlpha:.6},chart:{colors:["#EE3300","#FFD300","#99DD33","#33DDFF","#9933FF","#EE0099"],backgroundColor:"#ffffff",backgroundAlpha:1},pie:{labelKey:"label",valueKey:"value"},coordinate:{graphs:[],valueAxes:[]},rectangular:{autoMargins:true,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0},serial:{reverse:false,serialKey:"label",autoSerialCount:true,minSerialCount:1,useSerialColor:false},newValueAxis:function(){var t={};m(t,G.axis);m(t,G.valueAxis);t.offset=10;return t},newSerialGraph:function(){var t={};m(t,G.graph);m(t,G.serialGraph);return t},newPieConfig:function(){var t={};m(t,G.chart);m(t,G.pie);t.title={};m(t.title,G.title);t.graph={};m(t.graph,G.graph);m(t.graph,G.pieGraph);t.tooltip={};m(t.tooltip,G.tooltip);return t},newSerialConfig:function(){var t={};m(t,G.chart);m(t,G.coordinate);m(t,G.rectangular);m(t,G.serial);t.title={};m(t.title,G.title);var i={};m(i,G.axis);m(i,G.serialAxis);t.serialAxis=i;t.graphs[0]=G.newSerialGraph();t.graphs[0].type="line";t.valueAxes[0]=G.newValueAxis();t.plot={};m(t.plot,G.plot);t.legend={};m(t.legend,G.legend);t.tooltip={};m(t.tooltip,G.tooltip);return t}};var F=function(t){this.config=t;this.axisData=null};a(F.prototype,{parseData:function(t,i,e,a){this.__searchMinAndMax(t,i,e||0,a||Number.MAX_VALUE);if(!isNaN(this.config.minValue)){this.minimum=Math.min(this.minimum,this.config.minValue)}this.__checkMinAndMax();var r=this.maximum-this.minimum;var s=this.config.gridCount;var h=r/s;this.__calculateUnit(h);this.__adjustMin();this.__adjustMax();this.axisData=this.__calculateAxisData(true)},__searchMinAndMax:function(t,i,e,a){var r;var s;a=Math.min(t.length,a);for(var h=e;h<a;h++){var n=t[h];for(var o in i){var l=n[i[o]];if(isNaN(l))continue;r=isNaN(r)?l:Math.min(l,r);s=isNaN(s)?l:Math.max(l,s)}}this.minimum=this.dataMininum=r;this.maximum=this.dataMaxinum=s},__calculateUnit:function(t){var i=Math.ceil(Math.log(t)*Math.LOG10E);if(this.config.onlyInteger||i==0){t=Math.pow(10,i)}else{var e=Math.ceil(t/Math.pow(10,i-1));t=e*Math.pow(10,i-1)}this.majorUnit=R.roundToPrecision(t,10)},__checkMinAndMax:function(){if(this.minimum>this.maximum){var t=this.minimum;this.minimum=this.maximum;this.maximum=t}else if(this.minimum==this.maximum){this.maximum=this.maximum+1}},__adjustMin:function(){if(this.minimum!=0){var t=this.dataMininum;this.minimum=Math.floor(this.dataMininum/this.majorUnit)*this.majorUnit;if(t==this.minimum){this.minimum-=this.majorUnit}}this.minimum=R.roundToPrecision(this.minimum,10)},__adjustMax:function(){if(this.maximum!=0){var t=this.dataMaxinum;this.maximum=Math.ceil(this.dataMaxinum/this.majorUnit)*this.majorUnit;if(t==this.maximum){this.maximum+=this.majorUnit}}this.maximum=R.roundToPrecision(this.maximum,10)},__calculateAxisData:function(t){var i=this.majorUnit;if(i==0){return[]}var e=this.minimum;if(t){var a=this.config.autoGridCount?1:this.config.gridCount;for(var r=0;e<this.maximum||r<a;r++){e=R.roundToPrecision(e+i,10)}this.maximum=e}e=this.minimum;var s=[e];while(e<this.maximum){e=R.roundToPrecision(e+i,10);s.push(e)}return s}});var z=function(){this._dom=this._newNode()};a(z.prototype,{_newNode:function(){return null},parent:function(){return this._dom.parent()}});var B=e(function(){z.call(this);this._visible=this.visible=true;this._alpha=this.alpha=1;this._x=this.x=0;this._y=this.y=0;this._rotate=this.rotation=0;this.mask=null},z);a(B.prototype,{addEventListener:function(t,i){j.addHandler(this._dom,t,i)},removeEventListener:function(t,i){j.removeHandler(this._dom,t,i)},getRect:function(){var t=d.getRect(this);return t},update:function(){d.setAttr(this)}});var W=e(function(){B.call(this);this._drawLine=false;this.lineDash=false;this.lineWidth=1;this.lineColor="#333333";this.lineAlpha=1;this._drawFill=false;this.fillColor="#ffeeff";this.fillAlpha=1;this.gradientType="solid";this.colors=["#ffffff","#ffffff"];this.alphas=[1,1];this.ratios=[0,1];this.dataArr=[M,0,0]},B);a(W.prototype,{_newNode:function(){return d.newPath()},beginStroke:function(t,i,e){this._drawLine=true;this.lineWidth=t||this.lineWidth;this.lineColor=i||this.lineColor;this.lineAlpha=e||this.lineAlpha;return this},stopStroke:function(){this._drawLine=false;return this},beginFill:function(t,i){this._drawFill=true;this.fillColor=t||this.fillColor;this.fillAlpha=i||this.fillAlpha;return this},stopFill:function(){this._drawFill=false;return this},clear:function(){this.dataArr=[M,0,0];return this},close:function(){if(this.dataArr.length>1&&this.dataArr[this.dataArr.length]!=T){this.dataArr.push(T)}return this},moveTo:function(t,i){this.dataArr.push(M,t,i);return this},lineTo:function(t,i){this.dataArr.push(I,t,i);return this},curveTo:function(t,i,e,a,r,s){this.dataArr.push(S,t,i,e,a,r,s);return this},arc:function(t,i,e,a,r,s,h){s=!!s;h=!!h;this.dataArr=this.dataArr.concat(d.arc.apply(this,arguments));return this},drawRect:function(t,i,e,a,r){this.dataArr=this.dataArr.concat(d.rect.apply(this,arguments));return this},drawCircle:function(t,i,e){this.dataArr=this.dataArr.concat(d.circle.apply(this,arguments));return this},update:function(){B.prototype.update.call(this);d.draw(this);return this}});var H=e(function(t){B.call(this);this.font="微软雅黑, 黑体, Verdana, Arial, Console";this.fontSize=12;this.letterSpacing=1;this.lineHeight=3;this.color="#666666";this.text=t||""},B);a(H.prototype,{_newNode:function(){return d.newText()},update:function(){B.prototype.update.call(this);d.setText(this);d.setTextFormat(this)}});var K=e(function(){B.call(this);this._elist=[]},B);a(K.prototype,{_newNode:function(){return d.newGroup()},length:function(){return this._elist.length},addChild:function(t){if(t){this._dom.appendChild(t._dom);this._elist.push(t)}return t},getChildAt:function(t){return this._elist[t]},removeChild:function(t){if(t){for(var i in this._elist){if(this._elist[i]===t){this._elist.splice(i,1);this._dom.removeChild(t._dom);break}}}return t},clear:function(){this._elist=[];while(this._dom.lastChild){this._dom.removeChild(this._dom.lastChild)}}});if(d.type=="vml"){K.prototype.getRect=function(){for(var t in this._elist){var i=this._elist[t].getRect();if(isNaN(e)){var e=i.left}else{e=Math.min(e,i.left)}if(isNaN(a)){var a=i.right}else{a=Math.max(a,i.right)}if(isNaN(r)){var r=i.top}else{r=Math.min(r,i.top)}if(isNaN(s)){var s=i.bottom}else{s=Math.max(s,i.bottom)}}if(this._elist.length>0){return{left:e,right:a,top:r,bottom:s,width:a-e,height:s-r}}return{left:0,right:0,top:0,bottom:0,width:0,height:0}}}var U=e(function(){K.call(this)},K);a(U.prototype,{_newNode:function(){return d.newDocument()}});var q=function(t,i){this._parent=t;this._SpriteClass=i;this._intelList=[];this._currentIndex=-1};a(q.prototype,{getLength:function(){return this._intelList.length},setLength:function(t){while(this._intelList.length>t)this._pop()},getChildAt:function(t){return this._intelList[t]},getChildIndex:function(t){return this._intelList.indexOf(t)},begin:function(t){this._SpriteClass=t||this._SpriteClass;this._currentIndex=0},hasNext:function(){return this._currentIndex<this.getLength()-1},next:function(){return this.getChildAt(this._currentIndex++)||this._push()},end:function(){this.setLength(this._currentIndex)},_push:function(){var t=new this._SpriteClass;this._parent.addChild(t);this._intelList.push(t);return t},_pop:function(){var t=this._intelList.pop();if(t!=null){this._parent.removeChild(t)}return t}});var X=e(function(){K.call(this);this.direction=null;this.axisLength;this.blockWidth=NaN;this.frontSpace=0;this.backSpace=0;this.title;this._ticks=this.addChild(new W)},K);a(X.prototype,{refresh:function(){var t=this.config,i=this._ticks,e=this.axisLength;if(this.direction=="x"){i.rotation=0;i.update()}else if(this.direction=="y"){i.rotation=90;i.update()}},_transformLabel:function(t,i){var e=this.config,a=t.getRect();this._ticks.beginStroke(e.axisThickness,e.axisColor);if(this.direction=="x"){if(e.labelInside){}else{}t.x=i-a.width/2;t.y=e.labelOffset;t.update();a=t.getRect();this.frontSpace=Math.max(this.frontSpace,-a.x)}else if(this.direction=="y"){if(e.labelInside){}else{}t.x=-(e.labelOffset+a.width);t.y=i-a.height/2;t.update();a=t.getRect();this.frontSpace=Math.max(this.frontSpace,a.y+a.height-this.axisLength);this.backSpace=Math.max(this.backSpace,-a.y)}}});var Y=e(function(t){X.call(this);this.chart=t;this.gridCount=5;this.labelContainer=new K;this.addChild(this.labelContainer);this.labelsPool=new q(this.labelContainer,H)},X);a(Y.prototype,{getPosition:function(t){var i=this.data,e=i.min,a=i.max;var r=(a-t)/(a-e);return r*this.axisLength},refresh:function(){X.prototype.refresh.call(this);var t=this.config,i=this.data,e=i.dataArr,a=e.length;this.labelsPool.begin();t.labelOffset=0;for(var r=0;r<a;r++){var s=e[r];var h=s.toString();var n=this.getPosition(s);var o=this.labelsPool.next();o.font=t.labelFont;o.color=t.labelColor;if(this.labelFormatter!=null){o.text=this.labelFormatter(h)}else if(this.labelText){o.text=StringUtil.replaceValue(this.labelText,h)}else{o.text=h}this._transformLabel(o,n)}this.labelsPool.end()}});var Q=e(function(t){X.call(this);this.chart=t;this.touchSide=false;this.labelsPool=new q(this)},X);a(Q.prototype,{getPosition:function(t){if(this.chart._dataSource==null)return NaN;var i=this.chart._chartConfig,e=this.chart._chartData,a=e.serialLength;var r=this.touchSide?a-1:a;var s=this.axisLength*(t/r);return s},getIndex:function(t,i){var e=this.chart.plotArea,a=e.right-e.left,r=e.bottom-e.top;if(t>0&&i>0&&t<a&&i<r){var s=t/this.blockWidth;if(this.touchSide){return Math.round(s)}else{return Math.floor(s)}}return-1},refresh:function(){X.prototype.refresh.call(this);var t=this.chart._dataSource,i=this.chart._chartConfig,e=this.config,a=this.chart._chartData,r=a.startIndex,s=a.endIndex,h=a.serialLength;if(this.touchSide&&h>1){this.blockWidth=this.axisLength/(h-1)}else{this.blockWidth=this.axisLength/h}_maxLength=NaN;_labels=[];this.labelsPool.begin(H);this._ticks.clear();var n=-45;var o=n*Math.PI/180;for(var l=r;l<=s;l++){var c=this.labelsPool.next();var f=t[l][i.serialKey];c.text=f;c.fontSize=e.labelSize;c.color=e.labelColor;var u=this.getPosition(l);this._ticks.moveTo(u,0);this._ticks.lineTo(u,e.tickLength);if(this.touchSide==false){u+=this.blockWidth/2}this._transformLabel(c,u)}this._ticks.update();this.labelsPool.end()}});var J=e(function(){K.call(this)},K);a(J.prototype,{});var Z=e(function(t){J.call(this);this.chart=t;this.pool=new q(this)},J);a(Z.prototype,{refresh:function(){var t=this.chart._chartConfig,i=t.colors,e=this.config,a=this.chart._chartData.graphArr,r=this.chart._chartData.graphTotalNum,s=this.chart._dataSource.length,h=s>1?-Math.PI/2:-Math.PI,n=h;this.pool.begin(ni);for(var o=0;o<s;o++){var l=i[o%i.length];var c=this.pool.length==o;var f=this.pool.next();f.index=o;f.config={lineThickness:e.lineThickness,lineColor:e.lineColor||D.adjustBrightness(l,-20),lineAlpha:e.lineAlpha,fillColor:l,fillAlpha:e.fillAlpha,margin:e.gap};var u=Math.PI*2*(a[o]/r);var d=n+u;d=Math.max(d,n);d=Math.min(d,h+Math.PI*2);var p=e.radius,g=e.radius*e.innerRadius;if(c||true){f.radius=p;f.radiusIn=g;f.startAngle=n;f.endAngle=d}f.update();n=d}this.pool.end()}});var $=e(function(t,i){K.call(this);this.type="column";this.chart=t;this.graphIndex=0;this.graphCount=1;this.valueAxis=i;this.pool=new q(this)},K);a($.prototype,{refresh:function(){var t=this.chart._chartConfig,i=this.config,e=this.chart._dataSource,a=this.chart._chartData,r=this.chart.serialAxis.blockWidth,s=a.startIndex,h=a.endIndex,n=a.serialLength;var o=r*.7/this.graphCount;o=Math.min(o,i.maxBarWidth);if(this.graphCount==1){var l=0}else{l=o*0}var c=r-o*this.graphCount-l*(this.graphCount-1);var f=c/2+this.graphIndex*(o+l);this.pool.begin(oi);for(var u=s;u<=h;u++){var d=!this.pool.hasNext();var p=this.pool.next();p.graph=this;p.index=u;p.label=e[u][i.valueKey];if(i.useDifferentColor){var g=t.colors[u%t.colors.length]}else{g=i.fillColor}p.config={lineAlpha:i.lineAlpha,lineThickness:i.lineThickness,lineColor:i.lineColor||D.adjustBrightness(i.fillColor,-50),fillAlpha:i.fillAlpha,fillColor:g};var _=this.chart.serialAxis.getPosition(u)+f,v=this.valueAxis.getPosition(0),m=o,b=this.valueAxis.getPosition(e[u][i.valueKey])-v;_=Math.round(_);v=Math.round(v);m=Math.round(m);b=Math.round(b);if(d){p.width=m;p.height=0}p.x=_;p.y=v;p.focusX=Math.round(_+m/2);p.focusY=v+b;V.to(p,1,{width:m,height:b,onUpdate:"update"})}this.pool.end()}});var ti=e(function(t,i){J.call(this);this.type="line";this.chart=t;this.valueAxis=i;this.lineShape=this.addChild(new W);this.dotContainer=this.addChild(new K);this.pool=new q(this.dotContainer)},J);a(ti.prototype,{refresh:function(){var t=this.config,i=this.chart.plotArea,e=this.chart._chartData,a=e.startIndex,r=e.endIndex,s=e.serialLength;var h=this.chart.serialAxis.touchSide?0:this.chart.serialAxis.blockWidth/2;this.pool.begin(li);for(var n=a;n<=r;n++){var o=this.pool.hasNext();var l=this.pool.next();l.graph=this;l.index=n;l.label=this.chart._dataSource[n][t.valueKey];l.config={lineAlpha:t.lineAlpha,lineThickness:t.lineThickness,lineColor:t.lineColor||t.fillColor,fillAlpha:1,fillColor:"#ffffff"};var c=this.chart.serialAxis.getPosition(n)+h;var f=this.valueAxis.getPosition(this.chart._dataSource[n][t.valueKey]);l.focusX=c;l.focusY=f;if(o||true){l.x=c;l.y=i.bottom-i.top}l.update();V.to(l,1,{y:f,onUpdate:"update"})}V.to(this,1,{onUpdate:"__refreshLines"});this.pool.end();this.__refreshLines()},__refreshLines:function(){var t=this.config;this.lineShape.clear();this.lineShape.beginStroke(t.lineThickness,t.lineColor||t.fillColor);this.pool.begin();var i=this.pool.getChildAt(0);if(i){this.lineShape.moveTo(i.x,i.y)}for(var e=0;e<this.pool.getLength();e++){var a=this.pool.next();this.lineShape.lineTo(a.x,a.y)}this.lineShape.update()}});var ii=e(function(t){K.call(this);this.chart=t;this._bg=this.addChild(new W);this._grid=this.addChild(new W);this._basicGrid=this.addChild(new W)},K);a(ii.prototype,{refresh:function(){var t=this.config,i=this.chart.plotArea,e=i.left,a=i.top,r=i.right-i.left,s=i.bottom-i.top,h=this.chart._chartData,n=this.chart.valueAxis,o=h.valueAxes[0].dataArr;this._grid.clear();this._grid.beginStroke(t.borderThicknesss,t.borderColor,t.borderAlpha);this._basicGrid.clear();this._basicGrid.beginStroke(4,t.borderColor,t.borderAlpha);for(var l=0;l<o.length;l++){var c=o[l];var f=Math.round(n.getPosition(c)+a);if(c==0){this._basicGrid.moveTo(Math.round(e),f);this._basicGrid.lineTo(Math.round(e+r),f)}else{this._grid.moveTo(Math.round(e),f);this._grid.lineTo(Math.round(e+r),f)}}this._grid.lineDash=true;this._grid.update();this._basicGrid.update()}});var ei=e(function(t){K.call(this);this.chart=t;this.pool=new q(this)},K);a(ei.prototype,{refresh:function(){var t=this.chart._chartConfig,i=t.colors,e=this.config,a=this.chart._chartData.legendArr;var r=0;var s=0;this.pool.begin(ci);for(var h=0;h<a.length;h++){var n=this.pool.next(),o=i[h%i.length],l=a[h];n.text=l.name;n.type=l.type;n.config={fillColor:o,fillAlpha:e.fillAlpha,lineThickness:e.lineThickness,lineColor:e.lineColor||D.adjustBrightness(o,-50),lineAlpha:e.lineAlpha};n.update();var c=n.getRect();if(r+c.width>this.chart.stageWidth){r=0;s+=c.height+5;n.x=Math.round(r);n.y=Math.round(s)}else{n.x=Math.round(r);n.y=Math.round(s);r+=c.width+e.margin}n.update()}this.pool.end()}});var ai=e(function(){K.call(this)},K);a(ai.prototype,{});var ri=e(function(t){this.chart=t;ai.call(this);this._lines=this.addChild(new W)},ai);a(ri.prototype,{destroy:function(){_tips=null;this.graphics.clear();while(this.numChildren>0)this.removeChildAt(0)},refresh:function(){var t=this.chart._dataSource,i=this.chart._chartConfig,e=this.config,a=this.chart.graph.pool,r=a.getLength(),s=this.chart._chartData,h=s.graphArr,n=s.graphTotalNum;this._tips=[];a.begin();for(var o=0;o<r;o++){var l=a.next();var c=Math.round(h[o]/n*1e3)/10;var f=t[o][i.labelKey]+":"+t[o][i.valueKey];var u=new H(f);u.font=e.font;u.fontSize=e.size;u.color=e.color;u.update();this.addChild(u);this._tips[o]=u}this.moving()},moving:function(){var t=this.chart._chartConfig,i=this.config,e=this.chart.graph.pool;var a=[];var r=[];e.begin();for(var s=0;s<this._tips.length;s++){var h=e.next(),n=this._tips[s],o=n.getRect();var l=(h.startAngle+h.endAngle)/2,c=Math.abs(Math.sin(l))*h.radius/3,f=Math.abs(Math.sin(l))*h.radius/4,u=h.x+Math.cos(l)*(h.radius+c),d=h.y+Math.sin(l)*(h.radius+c);if(Math.cos(l)>0){r.push({sector:h,tip:n});n.x=u+f;n.y=d-o.height/2}else{a.unshift({sector:h,tip:n});n.x=u-o.width-f;n.y=d-o.height/2}n.update()}this._lines.clear();this._lines.beginStroke(i.lineThickness,i.lineColor,i.lineAlpha);this.repareTips(a);this.repareTips(r)},repareTips:function(t){var i=0;for(i=0;i<t.length;i++){var e=t[i].sector,a=t[i].tip,r=a.getRect();
var s=(e.startAngle+e.endAngle)/2,h=Math.min((e.radius-e.radiusIn)/2,5),n=Math.abs(Math.sin(s))*e.radius/3,o=Math.abs(Math.sin(s))*e.radius/4,l=e.x+Math.cos(s)*(e.radius-h),c=e.y+Math.sin(s)*(e.radius-h),f=e.x+Math.cos(s)*(e.radius+n),u=a.y+r.height/2;this._lines.moveTo(l,c);this._lines.lineTo(f,u);if(Math.cos(s)>0){this._lines.lineTo(f+o,u)}else{this._lines.lineTo(f-o,u)}}this._lines.update()}});var si=e(function(t){ai.call(this);this.chart=t;this._lines=this.addChild(new W);this._tip=this.addChild(new H);this._tip.visible=false;this._tip.update();this._lastItem=null;var e=this;this._over=false;this.overListener=function(t){t=j.getEvent(t);i.event=null;if(t.targetType=="sprite"){e._over=true;e._offLast();e._onItem(t.element)}else{e._over=false}};this.moveListener=function(t){if(e._over)return;t=j.getEvent(t);e._findNearest(t)};this.chart.addEventListener("mouseover",this.overListener);this.chart.addEventListener("mousemove",this.moveListener)},ai);a(si.prototype,{destroy:function(){_tips=null;this.graphics.clear();while(this.numChildren>0)this.removeChildAt(0)},refresh:function(){this._lastItem=null},_onItem:function(t){var i=t.graph,e=this.chart,a=e.plotArea,r=e._dataSource[t.index][i.config.valueKey];this._tip.text=r;this._tip.update();var s=this._tip.getRect(),h=8;this._tip.x=a.left+t.focusX-s.width/2;this._tip.y=a.top+t.focusY;if(i.type=="column"&&this._tip.height>0){this._tip.y+=h}else{this._tip.y-=h+s.height}this._tip.visible=true;this._tip.update();t.activated=true;t.update();this._lastItem=t},_offLast:function(){if(this._lastItem){this._lastItem.activated=false;this._lastItem.update();this._lastItem=null}this._tip.visible=false;this._tip.update()},_findNearest:function(t){var i=this.chart,e=i.getRect(),a=i.plotArea,r=t.clientX-e.left-a.left,s=t.clientY-e.top-a.top,h=i.serialAxis.getIndex(r,s);if(h==-1){this._offLast();return}var n=[];for(var o=0;o<i.graphs.length;o++){var l=i.graphs[o];if(l.type=="line"){n.push(l)}}for(o=0;o<n.length;o++){var c=n[o].pool.getChildAt(h);if(!f&&c){var f=c}else{if(Math.abs(c.y-s)<Math.abs(f.y-s)){f=c}}}if(this._lastItem==f){return}else{this._offLast();if(f){this._onItem(f)}}}});var hi=e(function(t){ai.call(this);this.chart=t;this.stageX=0;this.stageY=0;this._directionH=true;this._directionV=true;this._lastIndex=-1;this.lastItems=[];this._first=true;this._balloon=this.addChild(new fi);this.chart.addEventListener("mouseover",a);this.chart.addEventListener("mouseout",a);this.chart.addEventListener("mousemove",a);var i=this;function e(t){}function a(t){var e=i.chart.getRect();i.stageX=t.clientX-e.left;i.stageY=t.clientY-e.top;i.refresh()}},ai);a(hi.prototype,{destroy:function(){this.resetLastItems()},refresh:function(){var t=this.chart,i=t.plotArea,e=this.stageX,a=this.stageY,r=t.serialAxis.getIndex(e-i.left,a-i.top),s=t._dataSource,h=t._chartConfig,n=t._chartData,o=t.graphs;this._balloon.config=this.config;if(r==-1||r>n.endIndex-n.startIndex){this.resetLastItems();this._lastIndex=r;this._balloon.visible=false;V.to(this._balloon,.5,{alpha:0,onUpdate:"update"});return}if(r!=this._lastIndex){this.resetLastItems();var l=s[r][h.serialKey];for(var c=0;c<o.length;c++){var f=o[c],u=f.config,d=s[r][u.valueKey],p=f.pool.getChildAt(r);l+="<br>"+u.name+"："+d;p.activated=true;p.update();this.lastItems.push(p)}this._balloon.text=l;this._balloon.update()}var g=this._balloon.getRect(),_=g.width,v=g.height,m=t.serialAxis.getPosition(r)+i.left,b=a,x=8,C=x,y=x,w=t.width-x,A=t.height-x;if(!t.serialAxis.touchSide){m+=t.serialAxis.blockWidth/2}if(this._directionH){if(m+_>w){m=m-_-x;this._directionH=false}else{m=m+x}}else{if(m-_<C){m=m+x;this._directionH=true}else{m=m-_-x}}if(this._directionV){if(b+v>A){b=b-v-x;this._directionV=false}else{b=b+x}}else{if(b-v<y){b=b+x;this._directionV=true}else{b=b-v-x}}this._balloon.visible=false;if(this._first){this._first=false;this._balloon.x=m;this._balloon.alpha=0}else{V.to(this._balloon,.1,{x:m,onUpdate:"update"})}this._balloon.y=b;this._balloon.update();V.to(this._balloon,.8,{alpha:1,onUpdate:"update"});this._lastIndex=r},resetLastItems:function(){while(this.lastItems.length>0){var t=this.lastItems.pop();t.activated=false;t.update()}}});var ni=e(function(){K.call(this);this._border=this.addChild(new W);this._bg=this.addChild(new W);this.borderAlpha=.8;this.startAngle=0;this.endAngle=0;this.radiusIn=30;this.radius=120;this._onOver=false;this.addEventListener("mouseover",i);this.addEventListener("mouseout",i);var t=this;function i(i){t._onOver=i.type=="mouseover";t.update()}},K);a(ni.prototype,{update:function(){K.prototype.update.call(this);var t=this.config,i=t.fillColor;if(this.activated||this._onOver){i=D.adjustBrightness(i,25)}this._border.clear();this._border.beginFill(t.lineColor,t.lineAlpha);this._drawSector(this._border,0);this._border.update();this._bg.clear();this._bg.beginFill(i,t.fillAlpha);this._drawSector(this._bg,t.lineThickness);this._bg.update()},_drawSector:function(t,i){var e=this.config,a=0,r,s=a+i,h=(this.endAngle-this.startAngle)/2,n=s/Math.sin(h),o=this.radius-i,l=Math.max(n,this.radiusIn+i);r=Math.asin(s/o);var c=this.startAngle+r;var f=this.endAngle-r;r=Math.asin(s/l);var u=this.startAngle+r;var d=this.endAngle-r;t.arc(0,0,o,c,f,false,true);t.arc(0,0,l,d,u,true,false);t.close()}});var oi=e(function(){K.call(this);this.activated=false;this.onOver=false;this._bg=this.addChild(new W);this._light=this.addChild(new W);this.addEventListener("mouseover",i);var t=this;function i(i){i=j.getEvent(i);i.element=t;i.targetType="sprite"}},K);a(oi.prototype,{update:function(){K.prototype.update.call(this);var t=this.config,i=t.fillColor,e=Math.min(this.width,0),a=Math.min(this.height,0),r=Math.abs(this.width),s=Math.abs(this.height);if(this.activated){i=D.adjustBrightness(t.fillColor,25)}this._bg.clear();this._bg.beginFill(i,t.fillAlpha);this._bg.drawRect(e,a,r,s);this._bg.update();this._light.clear();this._light.beginStroke(1,t.lineColor,t.lineAlpha);this._light.beginFill(i);this._light.drawRect(e,a,r,s)}});var li=e(function(){K.call(this);this.activated=false;this._bg=this.addChild(new W)},K);a(li.prototype,{update:function(){var t=this.config;this.visible=this.activated;this._bg.clear();if(this.activated){this._bg.beginStroke(t.lineThickness,t.lineColor,t.lineAlpha);this._bg.beginFill(t.fillColor);this._bg.drawCircle(0,0,4)}this._bg.update();K.prototype.update.call(this)}});var ci=e(function(){K.call(this);this._bg=this.addChild(new W);this._labelObject=this.addChild(new H);this.onOver=false},K);a(ci.prototype,{update:function(){K.prototype.update.call(this);var t=this.config;this._labelObject.text=this.text;this._labelObject.x=18;this._labelObject.update();var i=this._labelObject.getRect(),e=9,a;this._bg.clear();if(this.type=="line"){this._bg.beginStroke(2,t.fillColor,t.fillAlpha);a=Math.round(i.height/2);this._bg.moveTo(0,a);this._bg.lineTo(12,a)}else{this._bg.beginStroke(t.lineThickness,t.lineColor,t.lineAlpha);this._bg.beginFill(t.fillColor,t.fillAlpha);a=Math.max(0,Math.round((i.height-e)/2));this._bg.drawRect(a,a,e,e)}this._bg.update()}});var fi=e(function(){K.call(this);this.text="";this._bg=this.addChild(new W);this._labelObject=this.addChild(new H)},K);a(fi.prototype,{update:function(){K.prototype.update.call(this);this._labelObject.text=this.text;this._labelObject.update();var t=this.config,i=this._labelObject.getRect(),e=10,a=Math.max(i.width+e*2,18),r=Math.max(i.height+e*2,12);this._labelObject.x=e;this._labelObject.y=e;this._labelObject.update();this._bg.clear();this._bg.beginStroke(t.borderThickness,t.borderColor,t.borderAlpha);this._bg.beginFill(t.backgroundColor,t.backgroundAlpha);this._bg.drawRect(0,0,a,r,5);this._bg.update()}});var ui=e(function(){K.call(this);this.title;this.lengend;this.tooltip;if(d.type=="svg")this._svgDefs()},K);a(ui.prototype,{_newNode:function(){return d.newDocument("VCharts "+n)},_svgDefs:function(){this.defs=this._dom.appendChild(d._newNode("defs"));var t=this.defs.appendChild(d._newNode("linearGradient"));t.id="gradient";v(t.appendChild(d._newNode("stop")),{offset:"0%","stop-color":"#ffffff","stop-opacity":.5});v(t.appendChild(d._newNode("stop")),{offset:"70%","stop-color":"#ffffff","stop-opacity":0})},setSize:function(t,i){this.stageWidth=t;this.stageHeight=i},setDataSource:function(t){this._dataSource=t},setConfig:function(t){this._chartConfig=t},setData:function(t){this._chartData=t},updateChart:function(){if(this._dataSource){if(this._helper){this.removeChild(this._helper);this._helper=null}this._configChart();this._refreshChart()}else{if(this._helper==null){this._helper=this.addChild(new H("No data"));this._helper.update();var t=this._helper.getRect();this._helper.x=(this.stageWidth-t.width)/2;this._helper.y=(this.stageHeight-t.height)/2;this._helper.update()}}},_configChart:function(){var t=this._chartConfig,i;if(t.title==null){if(this.titleObject){this.removeChild(this.titleObject);this.titleObject=null}}else if(t.title){if(!this.titleObject){this.titleObject=new H;this.addChild(this.titleObject)}i=t.title;this.titleObject.text=i.text;this.titleObject.font=i.font;this.titleObject.fontSize=i.size;this.titleObject.color=i.color;this.titleObject.update()}if(t.legend==null){if(this.legend){this.removeChild(this.legend);this.legend=null}}else if(t.legend){if(!this.legend){this.legend=new ei(this);this.addChild(this.legend)}this.legend.config=t.legend}},_refreshChart:function(){this.graphArea=new N(0,0,this.stageWidth,this.stageHeight);var t=this._chartConfig,i,e,a,r;if(this.titleObject){i=t.title;this.titleObject.update();r=this.titleObject.getRect();this.graphArea.top=r.height+i.offset;this.titleObject.x=(this.stageWidth-r.width)/2;this.titleObject.y=0;this.titleObject.update();if(this.legend){this.legend.refresh();i=this.legend.config;r=this.legend.getRect();this.graphArea.bottom-=r.height+i.offset}}},_refreshLegend:function(){if(this.legend){var t=this.legend.config,i=this.legend.getRect(),e=(this.stageWidth-i.width)/2,a=this.graphArea.bottom+t.offset;this.legend.x=Math.round(e)+.5;this.legend.y=Math.round(a)+.5;this.legend.update()}}});var di=e(function(){ui.call(this);this.plot;this.graphs;this.plot=this.addChild(this._newPlot());this.plot.x=.5;this.plot.y=.5;this.plot.update();this.graphContainer=this.addChild(new K);this.graphContainer.x=.5;this.graphContainer.y=.5;this.graphContainer.update();this.axisContainer=this.addChild(new K);this.axisContainer.x=.5;this.axisContainer.y=.5;this.axisContainer.update()},ui);a(di.prototype,{_newPlot:function(){return null},_configChart:function(){ui.prototype._configChart.call(this);var t=this._chartConfig;this.plot.config=t.plot}});var pi=e(function(){di.call(this);this.repeatCount=0;this._top=0;this._bottom=0;this._left=0;this._right=0},di);a(pi.prototype,{_newPlot:function(){return new ii(this)},_svgDefs:function(){di.prototype._svgDefs.call(this);this.graphClip=d._newNode("clipPath");this.graphClip.id="vcharts-graph-clip";this.defs.appendChild(this.graphClip);this.clipRect=new W;this.graphClip.appendChild(this.clipRect._dom)},_adjustAxes:function(t,i,e){var a=0;var r=0;var s=0;for(var h=0;h<t.length;h++){var n=t[h];n.axisLength=this.plotArea.bottom-this.plotArea.top;n.refresh();a=Math.max(a,n.backSpace,0);r=Math.max(r,n.frontSpace,0);if(n.config.labelInside==false){s+=n.config.offset+n.getRect().width}n.x=Math.round(this.plotArea.left-n.config.offset);n.y=Math.round(this.plotArea.top);n.update()}var o=0;for(h=0;h<i.length;h++){n=i[h];n.axisLength=this.plotArea.bottom-this.plotArea.top;n.refresh();a=Math.max(a,n.backSpace,0);r=Math.max(r,n.frontSpace,0);if(n.config.labelInside==false){o+=n.config.offset+n.getRect().width}n.x=Math.round(this.plotArea.right+n.config.offset);n.y=Math.round(this.plotArea.top);n.update()}var l=0;var c=0;var f=0;var u=0;for(h=0;h<e.length;h++){n=e[h];n.axisLength=this.plotArea.right-this.plotArea.left;n.refresh();l=Math.max(l,n.frontSpace,0);c=Math.max(c,n.backSpace,0);if(n.config.labelInside==false){u+=n.config.offset+n.getRect().height}n.x=Math.round(this.plotArea.left);n.y=Math.round(this.plotArea.bottom+n.config.offset);n.update()}this._top=Math.max(f,a);this._bottom=Math.max(u,r);this._left=Math.max(s,l);this._right=Math.max(o,c)},_adjustPlotArea:function(t,i,e){var a=this._chartConfig;this._adjustAxes(t,i,e);var r=false;if(this.plotArea.top<this.graphArea.top+this._top){this.plotArea.top=this.graphArea.top+this._top;r=true}if(this.plotArea.left<this.graphArea.left+this._left){this.plotArea.left=this.graphArea.left+this._left;r=true}if(this.plotArea.right>this.graphArea.right-this._right){this.plotArea.right=this.graphArea.right-this._right;if(this.plotArea.right<this.plotArea.left){this.plotArea.right=this.plotArea.left;this.graphArea.right=this.plotArea.bottom+this._right;r=false}else{r=true}}if(this.plotArea.bottom>this.graphArea.bottom-this._bottom){this.plotArea.bottom=this.graphArea.bottom-this._bottom;if(this.plotArea.bottom<this.plotArea.top){this.plotArea.bottom=this.plotArea.top;this.graphArea.bottom=this.plotArea.bottom+this._bottom;r=false}else{r=true}}if(a.autoMargins&&r&&this.repeatCount++<5){this._adjustPlotArea(t,i,e)}else{this._adjustAxes(t,i,e);this.repeatCount=0}},_adjustGraphArea:function(){var t=this.plotArea;if(this.clipRect){this.clipRect.clear();this.clipRect.drawRect(0,0,t.right-t.left,t.bottom-t.top);this.clipRect.update()}}});var gi=e(function(){ui.call(this);this.graph=null;this._legendData=null},ui);a(gi.prototype,{__init__:function(){ui.prototype.__init__.call(this)},_configChart:function(){ui.prototype._configChart.call(this);var t=this._chartConfig;if(!this.graph){this.graph=new Z(this);this.addChild(this.graph)}this.graph.config=t.graph;var i=t.tooltip;if(this.tooltip){if(i==null||i&&i.type==tooltip.config.type){this.tooltip.destroy();this.removeChild(this.tooltip);this.tooltip=null}}if(i){if(this.tooltip==null){this.tooltip=new ri(this);this.addChild(this.tooltip)}this.tooltip.config=i}},_refreshChart:function(){ui.prototype._refreshChart.call(this);this.graphArea.bottom-=1;var t=this.graph.config,i=this.graphArea,e=Math.min((i.right-i.left)/2,(i.bottom-i.top)/2);t.radius=e*2.1/3;var a=this.stageWidth/2,r=(this.graphArea.bottom+this.graphArea.top)/2;this.graph.x=Math.round(a);this.graph.y=Math.round(r);this.graph.update();this.graph.refresh();if(this.tooltip){this.tooltip.x=Math.round(a);this.tooltip.y=Math.round(r);this.tooltip.update();this.tooltip.refresh()}}});var _i=e(function(){pi.call(this);this.serialAxis=null;this.areaGraphs=[];this.barGraphs=[];this.lineGraphs=[]},pi);a(_i.prototype,{_configChart:function(){pi.prototype._configChart.call(this);var t=this._chartConfig,i=this._dataSource,e=this._chartData;if(!this.serialAxis){this.serialAxis=new Q(this);this.axisContainer.addChild(this.serialAxis)}this.serialAxis.config=t.serialAxis;if(!this.valueAxis){this.valueAxis=new Y(this);this.axisContainer.addChild(this.valueAxis)}this.valueAxis.config=t.valueAxes[0];this.valueAxis.data=e.valueAxes[0];var a=this.serialAxis,r=t.serialKey;this.graphContainer.clear();this.graphs=[];var s=[];var h=[];for(var n=0;n<t.graphs.length;n++){var o;switch(t.graphs[n].type){case"column":case"bar":o=this.barGraphs.shift()||new $(this,this.valueAxis);s.push(o);break;case"line":o=this.lineGraphs.shift()||new ti(this,this.valueAxis);h.push(o);break;default:continue;break}o.config=t.graphs[n];this.graphs.push(o)}this.barGraphs=s;this.lineGraphs=h;for(n=0;n<this.barGraphs.length;n++){var l=this.barGraphs[n];l.graphCount=this.barGraphs.length;l.graphIndex=n;this.graphContainer.addChild(l)}for(n=0;n<this.lineGraphs.length;n++){o=this.lineGraphs[n];this.graphContainer.addChild(o)}for(n=0;n<this.graphs.length;n++){o=this.graphs[n];o.config.fillColor=o.config.fillColor||t.colors[n%this.graphs.length]}if(this.tooltip){this.tooltip.destroy();this.removeChild(this.tooltip);this.tooltip=null}if(t.tooltip){if(this.tooltip==null){this.tooltip=new si(this);this.addChild(this.tooltip)}this.tooltip.config=t.tooltip}},_refreshChart:function(){pi.prototype._refreshChart.call(this);var t=this._chartConfig;if(!t.inverted){var i=this.serialAxis;var e=this.valueAxis}else{i=this.serialAxis;e=this.valueAxis}i.direction="x";e.direction="y";this.plotArea=this.graphArea.clone();this.plotArea.bottom-=1;this.plotArea.right-=1;this._adjustPlotArea([e],[],[i]);this._adjustGraphArea();this.plot.refresh();var a=this.plotArea,r=Math.round(a.left),s=Math.round(a.top);this.graphContainer.x=r;this.graphContainer.y=s;this.graphContainer.visible=false;this.graphContainer.update();for(var h=0;h<this.graphs.length;h++){var n=this.graphs[h];n.refresh()}if(this.tooltip){this.tooltip.refresh()}this._refreshLegend()}});var vi=function(t){this.context=t};a(vi.prototype,{onStage:function(){if(this.initialized){console.log("已初始化！");return}var t=this.context.element;this._chartView=this._newChart(this.context.type);while(t.lastChild)t.removeChild(t.lastChild);t.appendChild(this._chartView._dom);t=null;this.initialized=true;this._readyCallback()},_newChart:function(t){switch(t){case"pie":return new gi;break;case"serial":return new _i;break}return null},_readyCallback:function(){var t=this;var i=this.context.element;this._width=i.clientWidth;this._height=i.clientHeight;this._chartView.setSize(i.clientWidth,i.clientHeight);setInterval(e,2e3);function e(){if(t._width!=i.clientWidth||t._height!=i.clientHeight){t._width=i.clientWidth;t._height=i.clientHeight;t._chartView.setSize(i.clientWidth,i.clientHeight);t._chartView.updateChart()}}if(this._dataSource){this._chartView.setDataSource(this._dataSource);this._dataSource=null}if(this._chartConfig){this._chartView.setConfig(this._chartConfig);this._chartConfig=null}if(this._chartData){this._chartView.setData(this._chartData);this._chartData=null}if(this._needRefresh){this._chartView.updateChart();this._needRefresh=false}},setDataSource:function(t){if(this.initialized){this._chartView.setDataSource(t)}else{this._dataSource=t}},setConfig:function(t){if(this.initialized){this._chartView.setConfig(t)}else{this._chartConfig=t}},setData:function(t){if(this.initialized){this._chartView.setData(t)}},update:function(){if(this.initialized){this._chartView.updateChart()}else{this._needRefresh=true}}});var mi=function(t){this.element=t;this._viewProxy=new vi(this);var i=this;if(r.body){e()}else{j.addHandler(s,"load",e)}function e(){if(p(t)){i.element=_(t)}if(!i.element)return;i.initialized=true;i.setSize(i._width||i.element.style.width||320,i._height||i.element.style.height||160);i._viewProxy.onStage()}};a(mi.prototype,{setData:function(t){this._dataSource=t;this._render();return this},setConfig:function(t){for(var i in t){switch(i){case"title":case"legend":case"serialAxis":case"tooltip":case"plot":if(this._chartConfig[i]&&t[i]!=null){m(this._chartConfig[i],t[i])}else{this._chartConfig[i]=t[i]}break;case"graph":if(this._chartConfig[i]){m(this._chartConfig[i],t[i])}else{this._chartConfig[i]=t[i]}break;case"valueAxes":for(var e=0;e<t[i].length;e++){var a=G.newValueAxis();m(a,t[i][e]);this._chartConfig[i][e]=a}while(this._chartConfig[i].length>e){this._chartConfig[i].pop()}break;case"graphs":for(var e=0;e<t[i].length;e++){a=G.newSerialGraph();m(a,t[i][e]);this._chartConfig[i][e]=a}while(this._chartConfig[i].length>e){this._chartConfig[i].pop()}break;default:this._chartConfig[i]=t[i];break}}this._render();return this},setSize:function(t,i){this._width=t;this._height=i;if(this.initialized){if(typeof t==="number")t=t+"px";if(typeof i==="number")i=i+"px";this.element.style.width=t;this.element.style.height=i}this._render();return this},_render:function(){if(!this.initialized)return;if(this.timerIndex==undefined){var t=this;this.timerIndex=setTimeout(function(){t.__onTimer()},33)}},__onTimer:function(){clearTimeout(this.timerIndex);this.timerIndex=undefined;this._parseConfig();if(this._dataSource){this._parseData()}this._viewProxy.setDataSource(this._dataSource);this._viewProxy.setConfig(this._chartConfig);this._viewProxy.update()},_parseConfig:function(){},_parseData:function(){}});var bi=e(function(t){mi.call(this,t)},mi);a(bi.prototype,{_parseConfig:function(){mi.prototype._parseConfig.call(this);var t=this._chartConfig;if(t.colors&&t.colors.length>0){}else{t.colors=D.createHueColors(t.graphs.length)}},_parseData:function(){mi.prototype._parseData.call(this);var t=this._chartConfig,i=t.graphs;this._legendData=[];for(var e=0;e<i.length;e++){this._legendData.push({name:i[e].name,type:i[e].type,color:t.colors[e%t.colors.length]})}}});var xi=e(function(t){bi.call(this,t)},bi);a(xi.prototype,{});var Ci=e(function(t){this.type="pie";this._chartConfig=G.newPieConfig();mi.call(this,t);this.graph=null},mi);a(Ci.prototype,{_parseConfig:function(){mi.prototype._parseConfig.call(this);var t=this._chartConfig,i=this._dataSource;if(t.colors&&t.colors.length>0){}else{t.colors=D.createHueColors(i.length)}},_parseData:function(){mi.prototype._parseData.call(this);var t=this._chartConfig,i=this._dataSource,e=0,a=[],r=0,s=[];for(var h in i){var n=i[h][t.valueKey]=Number(i[h][t.valueKey]);e+=n}if(e>0){for(h in i){var n=i[h][t.valueKey];var o=n/e;var l;if(o>0&&o<.01)l=.01*e;else l=n;r+=l;a.push(l)}}for(h=0;h<i.length;h++){s.push({name:i[h][t.labelKey],color:t.colors[h%t.colors.length]})}this._viewProxy.setData({graphArr:a,graphTotalNum:r,legendArr:s})}});var yi=e(function(t){this.type="serial";this._chartConfig=G.newSerialConfig();xi.call(this,t);this._startIndex=0;this._endIndex=Number.MAX_VALUE;this._serialCount=1},xi);a(yi.prototype,{_parseConfig:function(){xi.prototype._parseConfig.call(this);var t=this._chartConfig,i=t.valueAxes,e=t.graphs;if(i.length==1){i[0].valueKeys=[];for(var a=0;a<e.length;a++){i[0].valueKeys[a]=e[a].valueKey;switch(e[a].type){case"column":case"bar":i[0].minValue=0;break}}}},_parseData:function(){xi.prototype._parseData.call(this);var t=this._chartConfig,i=this._dataSource;if(!i){return}this._startIndex=0;this._endIndex=Math.max(this._startIndex,i.length-1);this._serialCount=Math.max(t.minSerialCount,i.length-this._startIndex);var e=new F(t.valueAxes[0]);e.parseData(i,t.valueAxes[0].valueKeys,this._startIndex,this._endIndex);this._viewProxy.setData({startIndex:this._startIndex,endIndex:this._endIndex,serialLength:this._serialCount,valueAxes:[{dataArr:e.axisData,min:e.minimum,max:e.maximum}],valueLines:e.axisData,legendArr:this._legendData})}});i.PieChart=Ci;i.SerialChart=yi;t.Ease=E;t.xmlRenderer=d;t.vcharts=i})(window);