/**
 * VCharts v0.7.0
 * license MIT (c) 2013 vcharts.cn/license
 */
!function(t){function a(t,i){for(var e in i)t[e]=i[e];return t}function f(t){return"string"==typeof t}function _(t){var i=null;try{i=h.getElementById(t)}catch(e){}return i}function v(t,i){for(var e in i)t.setAttribute(e,i[e])}var i={},e=function(){function t(){}return function(i,e){var a,h,s=i.prototype;t.prototype=e.prototype,h=i.prototype=new t;for(a in s)h[a]=s[a];return i.prototype.constructor=i,i.superClass=e.prototype,i}}(),h=document,s=t,r="0.7.0",o=navigator.userAgent,l=s.opera,c=/msie/i.test(o)&&!l,u="http://www.w3.org/2000/svg",d=!!h.createElementNS&&!!h.createElementNS(u,"svg").createSVGRect,p=null,m=a,A=p={type:"svg",_newNode:function(t){var i=h.createElementNS(u,t);return i},newDocument:function(t){var i=this._newNode("svg");return i.style.position="relative",i.style.width="100%",i.style.height="100%",v(i,{version:"1.1"}),t&&i.appendChild(this._newNode("desc")).appendChild(h.createTextNode(t)),i},newGroup:function(){var t=this._newNode("g");return t},newPath:function(){var t=this._newNode("path");return t.style.fillRule="evenodd",t},newText:function(){var t=this._newNode("text"),i={"font-family":"Verdana, Console, Arial, 微软雅黑, 宋体","font-size":12,fill:"#666666","text-anchor":"start"};return v(t,i),t},setAttr:function(t){var i=t._dom,e=[],a={};a.visibility=t.visible?"visible":"hidden",t._alpha!=t.alpha&&(a.opacity=t.alpha),(t._x!=t.x||t._y!=t.y)&&e.push("translate("+t.x+", "+t.y+")"),t._rotate!=t.rotation&&e.push("rotate("+t.rotation+")"),e.length>0&&(a.transform=e.join(" ")),t.mask&&(a["clip-path"]="url(#"+t.mask.id+")"),v(i,a)},getRect:function(t){var i=t._dom.getBoundingClientRect(),e={x:t.x,y:t.y,left:i.left,right:i.right,top:i.top,bottom:i.bottom,width:i.width,height:i.height};return e},draw:function(t){var i={stroke:t._drawLine?t.lineColor:"none","stroke-dasharray":t.lineDash?5:"none","stroke-width":t.lineWidth,"stroke-opacity":t.lineAlpha,fill:t._drawFill?t.fillColor:"none","fill-opacity":t.fillAlpha};if("linear"==t.gradientType||"rad"==t.gradientType){if("linear"==t.gradientType)var e=t.appendChild(this._newNode("linearGradient"));for(var a=0;a<t.colors.length;a++){var h=e.appendChild(this._newNode("stop"));v(h,{offset:100*t.ratios[a]+"%","stop-color":t.colors[a],"stop-opacity":t.alphas[a]})}}v(t._dom,{d:t.dataArr.join(" ")}),v(t._dom,i)},curveTo:function(t,i,e,a,h,s){var n=["C",t,i,e,a,h,s];return n},arc:function(t,i,e,a,h,s,n){var r=e,o=a,l=h,c=t+Math.cos(o)*r,u=i+Math.sin(o)*r,d=t+Math.cos(l)*r,p=i+Math.sin(l)*r,f=Math.abs(h-a)>Math.PI?1:0,g=s?0:1,_=[n?"M":"L",c,u,"A",r,r,0,f,g,d,p];return _},circle:function(t,i,e){var h,a=e;return h=["M",t+a,i,"a",a,a,0,0,1,-2*a,0,"a",a,a,0,0,1,2*a,0]},rect:function(t,i,e,a,h){var l,s=e,n=a,r=Math.min(s,n),o=Math.min(r/2,h);if(o>0){var c=s-2*o,u=n-2*o;l=["M",t+o,i,"h",c,"q",o,0,o,o,"v",u,"q",0,o,-o,o,"h",-c,"q",-o,0,-o,-o,"v",-u,"q",0,-o,o,-o]}else l=["M",t,i,"h",s,"v",n,"h",-s,"v",-n];return l},setText:function(t){for(var i=t._dom,e=t.fontSize,a=Math.max(-t.fontSize,t.lineHeight),s=t.text.split(/<br>/gi),n=0;n<s.length;n++){var r=i.childNodes[n];if(r)r.firstChild.nodeValue=s[n];else{r=this._newNode("tspan");{r.appendChild(h.createTextNode(s[n]))}i.appendChild(r)}v(r,{"font-size":e,x:0,y:n*(e+a),dy:e})}for(;i.childNodes.length>n;)i.removeChild(i.lastChild)},setTextFormat:function(t){var i=t._dom,e={"font-family":t.font,"letter-spacing":t.letterSpacing,fill:t.color};v(i,e)}},w={type:"vml",_newNode:function(t){var i="<v:"+t;P&&(i+=' style="behavior:url(#default#VML);display:inline-block;"'),i+=" />";var e=h.createElement(i);return e.style.position="absolute",e},_newSubNode:function(t){var i="<v:"+t;P&&(i+=' style="behavior:url(#default#VML);"'),i+=" />";var e=h.createElement(i);return e},newDocument:function(){var t=this._newNode("g");return t.style.position="relative",t.style.width="100%",t.style.height="100%",t},newGroup:function(){var t=this._newNode("g");return t},newPath:function(){var t=this._newNode("shape");return t.coordsize="1, 1",t.style.width="1px",t.style.height="1px",t},newText:function(){var t=h.createElement("div");return t.style.position="absolute",t.style.whiteSpace="nowrap",t},setAttr:function(t){var i=t._dom,e=i.style;e.left=t.x,e.top=t.y,e.rotation=t.rotation,e.visibility=t.visible?"visible":"hidden"},getRect:function(t){var i=t._dom,e=i.getBoundingClientRect(),a={x:t.x,y:t.y,left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.right-e.left,height:e.bottom-e.top};return a},draw:function(t){var i=t._dom;i.stroked=t._drawLine,i.filled=t._drawFill,t._drawLine?(t.stroke=t.stroke||this._newSubNode("stroke"),t.stroke.opacity=t.lineAlpha,t.stroke.weight=t.lineWidth,t.stroke.color=t.lineColor,t.stroke.dashStyle=t.lineDash?"dash":"solid",i.appendChild(t.stroke)):t.stroke&&i.contains(t.stroke)&&i.removeChild(t.stroke),t._drawFill?(t.fill=t.fill||this._newSubNode("fill"),t.fill.opacity=t.fillAlpha,t.fill.color=t.fillColor,i.appendChild(t.fill)):t.fill&&i.contains(t.fill)&&i.removeChild(t.fill);for(var e in t.dataArr)"number"==typeof t.dataArr[e]&&(t.dataArr[e]=Math.round(t.dataArr[e]));i.path=t.dataArr.join(" ")},curveTo:function(t,i,e,a,h,s){var n=["c",t,i,e,a,h,s];return n},arc:function(t,i,e,a,h,s,n){var r=e,o=a,l=h,c=t+Math.cos(o)*r,u=i+Math.sin(o)*r,d=t+Math.cos(l)*r,p=i+Math.sin(l)*r,f=[s?n?"ar":"at":n?"wr":"wa",t-r,i-r,t+r,i+r,c,u,d,p];return f},circle:function(t,i,e){var h,a=e;return h=["wr",t-a,i-a,t+a,i+a,t+a,i,t+a,i,"x"]},rect:function(t,i,e,a,h){var l,s=e,n=a,r=Math.min(s,n),o=Math.min(r/2,h);return l=o>0?["M",t+o,i,"L",t+s-o,i,"QX",t+s,i+o,"L",t+s,i+n-o,"QY",t+s-o,i+n,"L",t+o,i+n,"QX",t,i+n-o,"L",t,i+o,"QY",t+o,i]:["M",t,i,"L",t+s,i,"L",t+s,i+n,"L",t,i+n,"L",t,i]},setText:function(t){for(var i=t._dom,s=(t.fontSize,t.text.split(/<br>/gi)),n=0;n<s.length;n++){var r=i.childNodes[n];r?r.firstChild.nodeValue=s[n]:(r=h.createElement("p"),r.appendChild(h.createTextNode(s[n])),i.appendChild(r)),r.style.position="static",r.style.margin="0 0"}for(;i.childNodes.length>n;)i.removeChild(i.lastChild)},setTextFormat:function(t){var i=t._dom,e=i.style;e.letterSpacing=t.letterSpacing,e.lineHeight=Math.max(t.fontSize+t.lineHeight,0)+"px",e.fontFamily=t.font,e.fontSize=t.fontSize,e.color=t.color}},M="M",I="L",S="C",k="Q",L="A",T="Z";if(d)p=A;else{if(!c)throw"抱歉，vcharts不支持此浏览器！";var P=o.indexOf("MSIE 8.0")>-1;h.namespaces.v||(document.namespaces.add("v","urn:schemas-microsoft-com:vml"),document.createStyleSheet().cssText="v\\: * { behavior:url(#default#VML); display: inline-block; } "),k="qb",L="ar",T="x",a(p,w)}var O=function(t,i){this.x=null==t?0:t,this.y=null==i?0:i};a(O.prototype,{clone:function(){return new O(this.x,this.y)}});var D=function(t,i,e,a){this.left=null==t?0:t,this.top=null==i?0:i,this.right=null==e?0:e,this.bottom=null==a?0:a};a(D.prototype,{check:function(){this.right<this.left&&(this.right=this.left),this.bottom<this.top&&(this.bottom=this.top)},getWidth:function(){return this.right-this.left},getHeight:function(){return this.bottom-this.top},clone:function(){return new D(this.left,this.top,this.right,this.bottom)}});var N={createHueColors:function(t){for(var i=[],e=360/t,a=0;t>a;a++)i.push(N.toString(N.fromHSB(a*e,70,90)));return i},fromString:function(t){if(!t)return 0;var i=t.match(/[0-9a-fA-F]{6}/g);return i.length?parseInt(i[0],16):0},fromRGB:function(t,i,e){return t<<16|i<<8|e},fromHSB:function(t,i,e){var a,h,s,n,r,o,l,c,u,d,p;return a=t/360,h=i/100,s=e/100,0==i?(n=255*s,r=255*s,o=255*s):(l=6*a,6==l&&(l=0),c=l,u=s*(1-h),d=s*(1-h*(l-c)),p=s*(1-h*(1-(l-c))),0==c?(n=s,r=p,o=u):1==c?(n=d,r=s,o=u):2==c?(n=u,r=s,o=p):3==c?(n=u,r=d,o=s):4==c?(n=p,r=u,o=s):(n=s,r=u,o=d)),255*n<<16|255*r<<8|255*o},adjustBrightness:function(t,i){t=N.fromString(t);var e=Math.max(Math.min((t>>16&255)+i,255),0),a=Math.max(Math.min((t>>8&255)+i,255),0),h=Math.max(Math.min((255&t)+i,255),0);return N.toString(N.fromRGB(e,a,h))},toString:function(t){for(var t=t.toString(16);t.length<6;)t="0"+t;return"#"+t}},j={addHandler:function(t,i,e){t.addEventListener?t.addEventListener(i,e,!1):t.attachEvent?t.attachEvent("on"+i,e):t["on"+i]=e},removeHandler:function(t,i,e){t.removeEventListener?t.removeEventListener(i,e,!1):t.detachEvent?t.detachEvent("on"+i,e):t["on"+i]=null},getEvent:function(t){return t=t||s.event,!s.addEventListener&&s.attachEvent&&(i.event=i.event||{},t=a(i.event,t)),t},getTarget:function(t){return t.target||t.srcElement},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}},R={roundToPrecision:function(t,i){var e=Math.pow(10,i||0);return Math.round(e*t)/e},roundPath:function(t){return t.replace(/[-+]?\d*\.?\d+/g,function(){return Math.round(Number(arguments[0]))})}},E=function(){throw"Ease cannot be instantiated."};E.linear=function(t){return t},E.none=E.linear,E.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(i){return 0==t?i:0>t?i*(i*-t+1+t):i*((2-i)*t+(1-t))}},E.getPowIn=function(t){return function(i){return Math.pow(i,t)}},E.getPowOut=function(t){return function(i){return 1-Math.pow(1-i,t)}},E.getPowInOut=function(t){return function(i){return(i*=2)<1?.5*Math.pow(i,t):1-.5*Math.abs(Math.pow(2-i,t))}},E.quadIn=E.getPowIn(2),E.quadOut=E.getPowOut(2),E.quadInOut=E.getPowInOut(2),E.cubicIn=E.getPowIn(3),E.cubicOut=E.getPowOut(3),E.cubicInOut=E.getPowInOut(3),E.quartIn=E.getPowIn(4),E.quartOut=E.getPowOut(4),E.quartInOut=E.getPowInOut(4),E.quintIn=E.getPowIn(5),E.quintOut=E.getPowOut(5),E.quintInOut=E.getPowInOut(5),E.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},E.sineOut=function(t){return Math.sin(t*Math.PI/2)},E.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},E.getBackIn=function(t){return function(i){return i*i*((t+1)*i-t)}},E.backIn=E.getBackIn(1.7),E.getBackOut=function(t){return function(i){return--i*i*((t+1)*i+t)+1}},E.backOut=E.getBackOut(1.7),E.getBackInOut=function(t){return t*=1.525,function(i){return(i*=2)<1?.5*i*i*((t+1)*i-t):.5*((i-=2)*i*((t+1)*i+t)+2)}},E.backInOut=E.getBackInOut(1.7),E.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},E.circOut=function(t){return Math.sqrt(1- --t*t)},E.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},E.bounceIn=function(t){return 1-E.bounceOut(1-t)},E.bounceOut=function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},E.bounceInOut=function(t){return.5>t?.5*E.bounceIn(2*t):.5*E.bounceOut(2*t-1)+.5},E.getElasticIn=function(t,i){var e=2*Math.PI;return function(a){if(0==a||1==a)return a;var h=i/e*Math.asin(1/t);return-(t*Math.pow(2,10*(a-=1))*Math.sin((a-h)*e/i))}},E.elasticIn=E.getElasticIn(1,.3),E.getElasticOut=function(t,i){var e=2*Math.PI;return function(a){if(0==a||1==a)return a;var h=i/e*Math.asin(1/t);return t*Math.pow(2,-10*a)*Math.sin((a-h)*e/i)+1}},E.elasticOut=E.getElasticOut(1,.3),E.getElasticInOut=function(t,i){var e=2*Math.PI;return function(a){var h=i/e*Math.asin(1/t);return(a*=2)<1?-.5*t*Math.pow(2,10*(a-=1))*Math.sin((a-h)*e/i):t*Math.pow(2,-10*(a-=1))*Math.sin((a-h)*e/i)*.5+1}},E.elasticInOut=E.getElasticInOut(1,.3*1.5);var V=function(){this._motionID=-1,this._dur=1,this._timeRate=20,this._motionCount=0,this._ease=E.cubicOut};V.to=function(t,i,e,a){var h=new V;return h._target=t,h._dur=i,h._parsePara(e),this._ease=a||E.cubicOut,V.__replace(h),V.__list.push(h),h.start(),h},V.__list=[],V.__replace=function(t){for(var i in V.__list){var e=V.__list[i];if(e._target==t._target)for(var a in t._para)delete e._para[a]}},a(V.prototype,{_parsePara:function(t){this._updateParams=[],this._para={};for(var i in t){var e=t[i];switch(i){case"onUpdate":this._updateFun=e;break;case"onUpdateParams":this._updateParams=e;break;default:this._para[i]=[this._target[i],e]}}},start:function(){var t=1e3/this._timeRate;this._motionCount=0,this._motionTotal=Math.ceil(1e3*this._dur/t);var i=this;this._motionID=setInterval(function(){if(i._motionCount++>=i._motionTotal){clearInterval(i._motionID);for(var t in V.__list)V.__list[t]==i&&V.__list.splice(t,1)}else i.__onUpdate()},t)},__onUpdate:function(){for(var t in this._para){var i=this._para[t],e=this._ease(this._motionCount/this._motionTotal)*(i[1]-i[0]);this._target[t]=i[0]+e}this._target[this._updateFun].apply(this._target,this._updateParams)},__onComplete:function(){}});var G={title:{display:!1,text:"vcharts",font:"微软雅黑, 黑体, Verdana, Arial, Console",size:20,color:"#333333",offset:12},graph:{display:!0,name:"某数据",lineThickness:2,lineAlpha:1,lineColor:null,fillColor:null,fillAlpha:1},pieGraph:{type:"slice",radius:100,innerRadius:.3,gap:0},serialGraph:{useDifferentColor:!1,valueKey:"value",maxBarWidth:50},xyGraph:{xKey:"x",yKey:"y"},axis:{display:!0,offset:0,axisThickness:1,axisColor:"#333333",gridThickness:1,gridColor:"#333333",gridType:"line",tickLength:5,titleText:"",titleOffset:0,labelColor:"#777777",labelFont:"微软雅黑, 黑体, Verdana, Arial, Console",labelSize:12,labelInside:!1,labelFormatter:function(t){return t},labelPosition:"middle",labelOffset:8,labelRotation:0,opposite:!1},serialAxis:{},valueAxis:{valueKeys:"auto",minValue:0/0,maxValue:0/0,autoGridCount:!0,gridCount:5,onlyInteger:!1,unit:"",unitPosition:"right"},plot:{display:!0,backgroundColor:"#ffffff",backgroundAlpha:1,borderThickness:1,borderColor:"#cacaca",borderAlpha:1},legend:{display:!1,margin:10,offset:10,lineAlpha:1,lineThickness:1,lineColor:null,lineAlpha:1},tooltip:{display:!0,type:"auto",text:"",font:"微软雅黑, 黑体, Verdana, Arial, Console",size:12,color:"#777777",lineThickness:1,lineColor:"#333333",lineAlpha:.5,backgroundAlpha:.8,backgroundColor:"#ffffff",borderThickness:2,borderColor:"#333333",borderAlpha:.6},chart:{colors:["#EE3300","#FFD300","#99DD33","#33DDFF","#9933FF","#EE0099"],backgroundColor:"#ffffff",backgroundAlpha:1},pie:{labelKey:"label",valueKey:"value"},coordinate:{graphs:[],valueAxes:[]},rectangular:{autoMargins:!0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0},serial:{reverse:!1,serialKey:"label",autoSerialCount:!0,minSerialCount:1,useSerialColor:!1},newValueAxis:function(){var t={};return m(t,G.axis),m(t,G.valueAxis),t.offset=10,t},newSerialGraph:function(){var t={};return m(t,G.graph),m(t,G.serialGraph),t},newPieConfig:function(){var t={};return m(t,G.chart),m(t,G.pie),t.title={},m(t.title,G.title),t.graph={},m(t.graph,G.graph),m(t.graph,G.pieGraph),t.legend={},m(t.legend,G.legend),t.tooltip={},m(t.tooltip,G.tooltip),t},newSerialConfig:function(){var t={};m(t,G.chart),m(t,G.coordinate),m(t,G.rectangular),m(t,G.serial),t.title={},m(t.title,G.title);var i={};return m(i,G.axis),m(i,G.serialAxis),t.serialAxis=i,t.graphs[0]=G.newSerialGraph(),t.graphs[0].type="line",t.valueAxes[0]=G.newValueAxis(),t.plot={},m(t.plot,G.plot),t.legend={},m(t.legend,G.legend),t.tooltip={},m(t.tooltip,G.tooltip),t}},z=function(t){this.config=t,this.axisData=null};a(z.prototype,{parseData:function(t,i,e,a){this.__searchMinAndMax(t,i,e||0,a||Number.MAX_VALUE),isNaN(this.config.minValue)||(this.minimum=Math.min(this.minimum,this.config.minValue)),this.__checkMinAndMax();var h=this.maximum-this.minimum,s=this.config.gridCount,n=h/s;this.__calculateUnit(n),this.__adjustMin(),this.__adjustMax(),this.axisData=this.__calculateAxisData(!0)},__searchMinAndMax:function(t,i,e,a){var h,s;a=Math.min(t.length,a);for(var n=e;a>n;n++){var r=t[n];for(var o in i){var l=r[i[o]];isNaN(l)||(h=isNaN(h)?l:Math.min(l,h),s=isNaN(s)?l:Math.max(l,s))}}this.minimum=this.dataMininum=h,this.maximum=this.dataMaxinum=s},__calculateUnit:function(t){var i=Math.ceil(Math.log(t)*Math.LOG10E);if(this.config.onlyInteger||0==i)t=Math.pow(10,i);else{var e=Math.ceil(t/Math.pow(10,i-1));t=e*Math.pow(10,i-1)}this.majorUnit=R.roundToPrecision(t,10)},__checkMinAndMax:function(){if(this.minimum>this.maximum){var t=this.minimum;this.minimum=this.maximum,this.maximum=t}else this.minimum==this.maximum&&(this.maximum=this.maximum+1)},__adjustMin:function(){if(0!=this.minimum){var t=this.dataMininum;this.minimum=Math.floor(this.dataMininum/this.majorUnit)*this.majorUnit,t==this.minimum&&(this.minimum-=this.majorUnit)}this.minimum=R.roundToPrecision(this.minimum,10)},__adjustMax:function(){if(0!=this.maximum){var t=this.dataMaxinum;this.maximum=Math.ceil(this.dataMaxinum/this.majorUnit)*this.majorUnit,t==this.maximum&&(this.maximum+=this.majorUnit)}this.maximum=R.roundToPrecision(this.maximum,10)},__calculateAxisData:function(t){var i=this.majorUnit;if(0==i)return[];var e=this.minimum;if(t){for(var a=this.config.autoGridCount?1:this.config.gridCount,h=0;e<this.maximum||a>h;h++)e=R.roundToPrecision(e+i,10);this.maximum=e}e=this.minimum;for(var s=[e];e<this.maximum;)e=R.roundToPrecision(e+i,10),s.push(e);return s}});var F=function(){this._dom=this._newNode()};a(F.prototype,{_newNode:function(){return null},parent:function(){return this._dom.parent()}});var H=e(function(){F.call(this),this._visible=this.visible=!0,this._alpha=this.alpha=1,this._x=this.x=0,this._y=this.y=0,this._rotate=this.rotation=0,this.mask=null},F);a(H.prototype,{addEventListener:function(t,i){j.addHandler(this._dom,t,i)},removeEventListener:function(t,i){j.removeHandler(this._dom,t,i)},getRect:function(){var t=p.getRect(this);return t},update:function(){p.setAttr(this)}});var W=e(function(){H.call(this),this._drawLine=!1,this.lineDash=!1,this.lineWidth=1,this.lineColor="#333333",this.lineAlpha=1,this._drawFill=!1,this.fillColor="#ffeeff",this.fillAlpha=1,this.gradientType="solid",this.colors=["#ffffff","#ffffff"],this.alphas=[1,1],this.ratios=[0,1],this.dataArr=[M,0,0]},H);a(W.prototype,{_newNode:function(){return p.newPath()},beginStroke:function(t,i,e){return this._drawLine=!0,this.lineWidth=t||this.lineWidth,this.lineColor=i||this.lineColor,this.lineAlpha=e||this.lineAlpha,this},stopStroke:function(){return this._drawLine=!1,this},beginFill:function(t,i){return this._drawFill=!0,this.fillColor=t||this.fillColor,this.fillAlpha=i||this.fillAlpha,this},stopFill:function(){return this._drawFill=!1,this},clear:function(){return this.dataArr=[M,0,0],this},close:function(){return this.dataArr.length>1&&this.dataArr[this.dataArr.length]!=T&&this.dataArr.push(T),this},moveTo:function(t,i){return this.dataArr.push(M,t,i),this},lineTo:function(t,i){return this.dataArr.push(I,t,i),this},curveTo:function(t,i,e,a,h,s){return this.dataArr.push(S,t,i,e,a,h,s),this},arc:function(t,i,e,a,h,s,n){return s=!!s,n=!!n,this.dataArr=this.dataArr.concat(p.arc.apply(this,arguments)),this},drawRect:function(){return this.dataArr=this.dataArr.concat(p.rect.apply(this,arguments)),this},drawCircle:function(){return this.dataArr=this.dataArr.concat(p.circle.apply(this,arguments)),this},update:function(){return H.prototype.update.call(this),p.draw(this),this}});var K=e(function(t){H.call(this),this.font="微软雅黑, 黑体, Verdana, Arial, Console",this.fontSize=12,this.letterSpacing=1,this.lineHeight=3,this.color="#666666",this.text=t||""},H);a(K.prototype,{_newNode:function(){return p.newText()},update:function(){H.prototype.update.call(this),p.setText(this),p.setTextFormat(this)}});var B=e(function(){H.call(this),this._elist=[]},H);a(B.prototype,{_newNode:function(){return p.newGroup()},length:function(){return this._elist.length},addChild:function(t){return t&&(this._dom.appendChild(t._dom),this._elist.push(t)),t},getChildAt:function(t){return this._elist[t]},removeChild:function(t){if(t)for(var i in this._elist)if(this._elist[i]===t){this._elist.splice(i,1),this._dom.removeChild(t._dom);break}return t},removeChildren:function(){for(this._elist=[];this._dom.lastChild;)this._dom.removeChild(this._dom.lastChild)}}),"vml"==p.type&&(B.prototype.getRect=function(){for(var t in this._elist){var i=this._elist[t].getRect();if(isNaN(e))var e=i.left;else e=Math.min(e,i.left);if(isNaN(a))var a=i.right;else a=Math.max(a,i.right);if(isNaN(h))var h=i.top;else h=Math.min(h,i.top);if(isNaN(s))var s=i.bottom;else s=Math.max(s,i.bottom)}return this._elist.length>0?{left:e,right:a,top:h,bottom:s,width:a-e,height:s-h}:{left:0,right:0,top:0,bottom:0,width:0,height:0}});var U=e(function(){B.call(this)},B);a(U.prototype,{_newNode:function(){return p.newDocument()}});var q=function(t,i){this._parent=t,this._SpriteClass=i,this._intelList=[],this._currentIndex=-1};a(q.prototype,{getLength:function(){return this._intelList.length},setLength:function(t){for(;this._intelList.length>t;)this._pop()},getChildAt:function(t){return this._intelList[t]},getChildIndex:function(t){return this._intelList.indexOf(t)},begin:function(t){this._SpriteClass=t||this._SpriteClass,this._currentIndex=0},hasNext:function(){return this._currentIndex<this.getLength()-1},next:function(){return this.getChildAt(this._currentIndex++)||this._push()},end:function(){this.setLength(this._currentIndex)},_push:function(){var t=new this._SpriteClass;return this._parent.addChild(t),this._intelList.push(t),t},_pop:function(){var t=this._intelList.pop();return null!=t&&this._parent.removeChild(t),t}});var X=e(function(){B.call(this),this.direction=null,this.axisLength,this.blockWidth=0/0,this.frontSpace=0,this.backSpace=0,this.title,this._ticks=this.addChild(new W)},B);a(X.prototype,{refresh:function(){{var i=(this.config,this._ticks);this.axisLength}"x"==this.direction?(i.rotation=0,i.update()):"y"==this.direction&&(i.rotation=90,i.update())},_transformLabel:function(t,i){var e=this.config,a=t.getRect();this._ticks.beginStroke(e.axisThickness,e.axisColor),"x"==this.direction?(e.labelInside,t.x=i-a.width/2,t.y=e.labelOffset,t.update(),a=t.getRect(),this.frontSpace=Math.max(this.frontSpace,-a.x)):"y"==this.direction&&(e.labelInside,t.x=-(e.labelOffset+a.width),t.y=i-a.height/2,t.update(),a=t.getRect(),this.frontSpace=Math.max(this.frontSpace,a.y+a.height-this.axisLength),this.backSpace=Math.max(this.backSpace,-a.y))}});var Y=e(function(t){X.call(this),this.chart=t,this.gridCount=5,this.labelContainer=new B,this.addChild(this.labelContainer),this.labelsPool=new q(this.labelContainer,K)},X);a(Y.prototype,{getPosition:function(t){var i=this.data,e=i.min,a=i.max,h=(a-t)/(a-e);return h*this.axisLength},refresh:function(){X.prototype.refresh.call(this);var t=this.config,i=this.data,e=i.dataArr,a=e.length;this.labelsPool.begin(),t.labelOffset=0;for(var h=0;a>h;h++){var s=e[h],n=s.toString(),r=this.getPosition(s),o=this.labelsPool.next();o.font=t.labelFont,o.color=t.labelColor,o.text=null!=this.labelFormatter?this.labelFormatter(n):this.labelText?StringUtil.replaceValue(this.labelText,n):n,this._transformLabel(o,r)}this.labelsPool.end()}});var Q=e(function(t){X.call(this),this.chart=t,this.touchSide=!1,this.labelsPool=new q(this)},X);a(Q.prototype,{getPosition:function(t){if(null==this.chart._dataSource)return 0/0;var e=(this.chart._chartConfig,this.chart._chartData),a=e.serialLength,h=this.touchSide?a-1:a,s=this.axisLength*(t/h);return s},getIndex:function(t,i){var e=this.chart.plotArea,a=e.right-e.left,h=e.bottom-e.top;if(t>0&&i>0&&a>t&&h>i){var s=t/this.blockWidth;return this.touchSide?Math.round(s):Math.floor(s)}return-1},refresh:function(){X.prototype.refresh.call(this);var t=this.chart._dataSource,i=this.chart._chartConfig,e=this.config,a=this.chart._chartData,h=a.startIndex,s=a.endIndex,n=a.serialLength;this.blockWidth=this.touchSide&&n>1?this.axisLength/(n-1):this.axisLength/n,_maxLength=0/0,_labels=[],this.labelsPool.begin(K),this._ticks.clear();for(var r=-45,l=(r*Math.PI/180,h);s>=l;l++){var c=this.labelsPool.next(),u=t[l][i.serialKey];c.text=u,c.fontSize=e.labelSize,c.color=e.labelColor;var d=this.getPosition(l);this._ticks.moveTo(d,0),this._ticks.lineTo(d,e.tickLength),0==this.touchSide&&(d+=this.blockWidth/2),this._transformLabel(c,d)}this._ticks.update(),this.labelsPool.end()}});var Z=e(function(){B.call(this)},B);a(Z.prototype,{});var J=e(function(t){Z.call(this),this.chart=t,this.pool=new q(this)},Z);a(J.prototype,{refresh:function(){var t=this.chart._chartConfig,i=t.colors,e=this.config,a=this.chart._chartData.graphArr,h=this.chart._chartData.graphTotalNum,s=this.chart._dataSource.length,n=s>1?-Math.PI/2:-Math.PI,r=n;this.pool.begin(ri);for(var o=0;s>o;o++){var l=i[o%i.length],u=(this.pool.length==o,this.pool.next());u.index=o,u.config={lineThickness:e.lineThickness,lineColor:e.lineColor||N.adjustBrightness(l,-20),lineAlpha:e.lineAlpha,fillColor:l,fillAlpha:e.fillAlpha,margin:e.gap};var d=2*Math.PI*(a[o]/h),p=r+d;p=Math.max(p,r),p=Math.min(p,n+2*Math.PI);var f=e.radius,g=e.radius*e.innerRadius;u.radius=f,u.radiusIn=g,u.startAngle=r,u.endAngle=p,u.update(),r=p}this.pool.end()}});var $=e(function(t,i){B.call(this),this.type="column",this.chart=t,this.graphIndex=0,this.graphCount=1,this.valueAxis=i,this.pool=new q(this)},B);a($.prototype,{refresh:function(){var t=this.chart._chartConfig,i=this.config,e=this.chart._dataSource,a=this.chart._chartData,h=this.chart.serialAxis.blockWidth,s=a.startIndex,n=a.endIndex,o=(a.serialLength,.7*h/this.graphCount);if(o=Math.min(o,i.maxBarWidth),1==this.graphCount)var l=0;else l=0*o;var c=h-o*this.graphCount-l*(this.graphCount-1),u=c/2+this.graphIndex*(o+l);this.pool.begin(oi);for(var d=s;n>=d;d++){var p=!this.pool.hasNext(),f=this.pool.next();if(f.graph=this,f.index=d,f.label=e[d][i.valueKey],i.useDifferentColor)var g=t.colors[d%t.colors.length];else g=i.fillColor;f.config={lineAlpha:i.lineAlpha,lineThickness:i.lineThickness,lineColor:i.lineColor||N.adjustBrightness(i.fillColor,-50),fillAlpha:i.fillAlpha,fillColor:g};var _=this.chart.serialAxis.getPosition(d)+u,v=this.valueAxis.getPosition(0),m=o,b=this.valueAxis.getPosition(e[d][i.valueKey])-v;_=Math.round(_),v=Math.round(v),m=Math.round(m),b=Math.round(b),p&&(f.width=m,f.height=0),f.width=m,f.height=b,f.x=_,f.y=v,f.focusX=Math.round(_+m/2),f.focusY=v+b,f.update()}this.pool.end()}});var ti=e(function(t,i){Z.call(this),this.type="line",this.chart=t,this.valueAxis=i,this.lineShape=this.addChild(new W),this.dotContainer=this.addChild(new B),this.pool=new q(this.dotContainer)},Z);a(ti.prototype,{refresh:function(){var t=this.config,i=this.chart.plotArea,e=this.chart._chartData,a=e.startIndex,h=e.endIndex,n=(e.serialLength,this.chart.serialAxis.touchSide?0:this.chart.serialAxis.blockWidth/2);this.pool.begin(li);for(var r=a;h>=r;r++){var l=(this.pool.hasNext(),this.pool.next());l.graph=this,l.index=r,l.label=this.chart._dataSource[r][t.valueKey],l.config={lineAlpha:t.lineAlpha,lineThickness:t.lineThickness,lineColor:t.lineColor||t.fillColor,fillAlpha:1,fillColor:"#ffffff"};var c=this.chart.serialAxis.getPosition(r)+n,u=this.valueAxis.getPosition(this.chart._dataSource[r][t.valueKey]);l.focusX=c,l.focusY=u,l.x=c,l.y=i.bottom-i.top,l.y=u,l.update()}this.pool.end(),this.__refreshLines()},__refreshLines:function(){var t=this.config;this.lineShape.clear(),this.lineShape.beginStroke(t.lineThickness,t.lineColor||t.fillColor),this.pool.begin();var i=this.pool.getChildAt(0);i&&this.lineShape.moveTo(i.x,i.y);for(var e=0;e<this.pool.getLength();e++){var a=this.pool.next();this.lineShape.lineTo(a.x,a.y)}this.lineShape.update()}});var ii=e(function(t){B.call(this),this.chart=t,this._bg=this.addChild(new W),this._grid=this.addChild(new W),this._basicGrid=this.addChild(new W)},B);a(ii.prototype,{refresh:function(){var t=this.config,i=this.chart.plotArea,e=i.left,a=i.top,h=i.right-i.left,n=(i.bottom-i.top,this.chart._chartData),r=this.chart.valueAxis,o=n.valueAxes[0].dataArr;this._grid.clear(),this._grid.beginStroke(t.borderThicknesss,t.borderColor,t.borderAlpha),this._basicGrid.clear(),this._basicGrid.beginStroke(4,t.borderColor,t.borderAlpha);for(var l=0;l<o.length;l++){var c=o[l],u=Math.round(r.getPosition(c)+a);0==c?(this._basicGrid.moveTo(Math.round(e),u),this._basicGrid.lineTo(Math.round(e+h),u)):(this._grid.moveTo(Math.round(e),u),this._grid.lineTo(Math.round(e+h),u))}this._grid.lineDash=!0,this._grid.update(),this._basicGrid.update()}});var ei=e(function(t){B.call(this),this.chart=t,this.pool=new q(this)},B);a(ei.prototype,{refresh:function(){var t=this.chart._chartConfig,i=t.colors,e=this.config,a=this.chart._chartData.legendArr,h=0,s=0;this.pool.begin(ci);for(var n=0;n<a.length;n++){var r=this.pool.next(),o=i[n%i.length],l=a[n];r.text=l.name,r.type=l.type,r.config={fillColor:o,fillAlpha:e.fillAlpha,lineThickness:e.lineThickness,lineColor:e.lineColor||N.adjustBrightness(o,-50),lineAlpha:e.lineAlpha},r.update();var c=r.getRect();h+c.width>this.chart.stageWidth?(h=0,s+=c.height+5,r.x=Math.round(h),r.y=Math.round(s)):(r.x=Math.round(h),r.y=Math.round(s),h+=c.width+e.margin),r.update()}this.pool.end()}});var ai=e(function(){B.call(this)},B);a(ai.prototype,{});var hi=e(function(t){this.chart=t,ai.call(this),this._lines=this.addChild(new W)},ai);a(hi.prototype,{destroy:function(){for(_tips=null,this._lines.clear();this.numChildren>0;)this.removeChildAt(0)},refresh:function(){var t=this.chart._dataSource,i=this.chart._chartConfig,e=this.config,a=this.chart._chartData,h=a.graphArr,s=a.graphTotalNum,n=this.chart.graphs[0],r=n.pool,o=r.getLength();this._tips=[],r.begin();for(var l=0;o>l;l++){var p=(r.next(),Math.round(h[l]/s*1e3)/10,t[l][i.labelKey],t[l][i.valueKey]),f=p+"",g=new K(f);g.font=e.font,g.fontSize=e.size,g.color=e.color,g.update(),this.addChild(g),this._tips[l]=g}this.moving()},moving:function(){var i=(this.chart._chartConfig,this.config),e=this.chart.graphs[0],a=e.pool,h=[],s=[];a.begin();for(var n=0;n<this._tips.length;n++){var r=a.next(),o=this._tips[n],l=o.getRect(),c=(r.startAngle+r.endAngle)/2,u=Math.abs(Math.sin(c))*r.radius/3,d=Math.abs(Math.sin(c))*r.radius/4,p=r.x+Math.cos(c)*(r.radius+u),f=r.y+Math.sin(c)*(r.radius+u);Math.cos(c)>0?(s.push({sector:r,tip:o}),o.x=p+d,o.y=f-l.height/2):(h.unshift({sector:r,tip:o}),o.x=p-l.width-d,o.y=f-l.height/2),o.update()}this._lines.clear(),this._lines.beginStroke(i.lineThickness,i.lineColor,i.lineAlpha),this.repareTips(h),this.repareTips(s)},repareTips:function(t){var i=0;for(i=0;i<t.length;i++){var e=t[i].sector,a=t[i].tip,h=a.getRect(),s=(e.startAngle+e.endAngle)/2,n=Math.min((e.radius-e.radiusIn)/2,5),r=Math.abs(Math.sin(s))*e.radius/3,o=Math.abs(Math.sin(s))*e.radius/4,l=e.x+Math.cos(s)*(e.radius-n),c=e.y+Math.sin(s)*(e.radius-n),u=e.x+Math.cos(s)*(e.radius+r),d=a.y+h.height/2;this._lines.moveTo(l,c),this._lines.lineTo(u,d),Math.cos(s)>0?this._lines.lineTo(u+o,d):this._lines.lineTo(u-o,d)}this._lines.update()}});var si=e(function(t){ai.call(this),this.chart=t,this._lines=this.addChild(new W),this._tip=this.addChild(new K),this._tip.visible=!1,this._tip.update(),this._lastItem=null;var e=this;this._over=!1,this.overListener=function(t){t=j.getEvent(t),i.event=null,"sprite"==t.targetType?(e._over=!0,e._offLast(),e._onItem(t.element)):e._over=!1},this.moveListener=function(t){e._over||(t=j.getEvent(t),e._findNearest(t))},this.chart.addEventListener("mouseover",this.overListener),this.chart.addEventListener("mousemove",this.moveListener)},ai);a(si.prototype,{destroy:function(){},refresh:function(){this._lastItem=null},_onItem:function(t){var i=t.graph,e=this.chart,a=e.plotArea,h=e._dataSource[t.index][i.config.valueKey];this._tip.text=h,this._tip.update();var s=this._tip.getRect(),n=8;this._tip.x=a.left+t.focusX-s.width/2,this._tip.y=a.top+t.focusY,"column"==i.type&&this._tip.height>0?this._tip.y+=n:this._tip.y-=n+s.height,this._tip.visible=!0,this._tip.update(),t.activated=!0,t.update(),this._lastItem=t},_offLast:function(){this._lastItem&&(this._lastItem.activated=!1,this._lastItem.update(),this._lastItem=null),this._tip.visible=!1,this._tip.update()},_findNearest:function(t){var i=this.chart,e=i.getRect(),a=i.plotArea,h=t.clientX-e.left-a.left,s=t.clientY-e.top-a.top,n=i.serialAxis.getIndex(h,s);if(-1==n)return this._offLast(),void 0;for(var r=[],o=0;o<i.graphs.length;o++){var l=i.graphs[o];"line"==l.type&&r.push(l)}for(o=0;o<r.length;o++){var c=r[o].pool.getChildAt(n);if(!u&&c)var u=c;else Math.abs(c.y-s)<Math.abs(u.y-s)&&(u=c)}this._lastItem!=u&&(this._offLast(),u&&this._onItem(u))}});var ni=e(function(t){function a(t){var e=i.chart.getRect();i.stageX=t.clientX-e.left,i.stageY=t.clientY-e.top,i.refresh()}ai.call(this),this.chart=t,this.stageX=0,this.stageY=0,this._directionH=!0,this._directionV=!0,this._lastIndex=-1,this.lastItems=[],this._first=!0,this._balloon=this.addChild(new ui),this.chart.addEventListener("mouseover",a),this.chart.addEventListener("mouseout",a),this.chart.addEventListener("mousemove",a);
var i=this},ai);a(ni.prototype,{destroy:function(){this.resetLastItems()},refresh:function(){var t=this.chart,i=t.plotArea,e=this.stageX,a=this.stageY,h=t.serialAxis.getIndex(e-i.left,a-i.top),s=t._dataSource,n=t._chartConfig,r=t._chartData,o=t.graphs;if(this._balloon.config=this.config,-1==h||h>r.endIndex-r.startIndex)return this.resetLastItems(),this._lastIndex=h,this._balloon.visible=!1,V.to(this._balloon,.5,{alpha:0,onUpdate:"update"}),void 0;if(h!=this._lastIndex){this.resetLastItems();for(var l=s[h][n.serialKey],c=0;c<o.length;c++){var u=o[c],d=u.config,p=s[h][d.valueKey],f=u.pool.getChildAt(h);l+="<br>"+d.name+"："+p,f.activated=!0,f.update(),this.lastItems.push(f)}this._balloon.text=l,this._balloon.update()}var g=this._balloon.getRect(),_=g.width,v=g.height,m=t.serialAxis.getPosition(h)+i.left,b=a,x=8,C=x,y=x,A=t.width-x,w=t.height-x;t.serialAxis.touchSide||(m+=t.serialAxis.blockWidth/2),this._directionH?m+_>A?(m=m-_-x,this._directionH=!1):m+=x:C>m-_?(m+=x,this._directionH=!0):m=m-_-x,this._directionV?b+v>w?(b=b-v-x,this._directionV=!1):b+=x:y>b-v?(b+=x,this._directionV=!0):b=b-v-x,this._balloon.visible=!1,this._first?(this._first=!1,this._balloon.x=m,this._balloon.alpha=0):V.to(this._balloon,.1,{x:m,onUpdate:"update"}),this._balloon.y=b,this._balloon.update(),V.to(this._balloon,.8,{alpha:1,onUpdate:"update"}),this._lastIndex=h},resetLastItems:function(){for(;this.lastItems.length>0;){var t=this.lastItems.pop();t.activated=!1,t.update()}}});var ri=e(function(){function i(i){t._onOver="mouseover"==i.type,t.update()}B.call(this),this._border=this.addChild(new W),this._bg=this.addChild(new W),this.borderAlpha=.8,this.startAngle=0,this.endAngle=0,this.radiusIn=30,this.radius=120,this._onOver=!1,this.addEventListener("mouseover",i),this.addEventListener("mouseout",i);var t=this},B);a(ri.prototype,{update:function(){B.prototype.update.call(this);var t=this.config,i=t.fillColor;(this.activated||this._onOver)&&(i=N.adjustBrightness(i,25)),this._border.clear(),this._border.beginFill(t.lineColor,t.lineAlpha),this._drawSector(this._border,0),this._border.update(),this._bg.clear(),this._bg.beginFill(i,t.fillAlpha),this._drawSector(this._bg,t.lineThickness),this._bg.update()},_drawSector:function(t,i){var h,a=(this.config,0),s=a+i,n=(this.endAngle-this.startAngle)/2,r=s/Math.sin(n),o=this.radius-i,l=Math.max(r,this.radiusIn+i);h=Math.asin(s/o);var c=this.startAngle+h,u=this.endAngle-h;if(!(isNaN(h)||0>h||c>=u)){h=l>0?Math.asin(s/l):0;var d=this.startAngle+h,p=this.endAngle-h;isNaN(h)||0>h||c>=u||(t.arc(0,0,o,c,u,!1,!0),t.arc(0,0,l,p,d,!0,!1),t.close())}}});var oi=e(function(){function i(i){i=j.getEvent(i),i.element=t,i.targetType="sprite"}B.call(this),this.activated=!1,this.onOver=!1,this._bg=this.addChild(new W),this._light=this.addChild(new W),this.addEventListener("mouseover",i);var t=this},B);a(oi.prototype,{update:function(){B.prototype.update.call(this);var t=this.config,i=t.fillColor,e=Math.min(this.width,0),a=Math.min(this.height,0),h=Math.abs(this.width),s=Math.abs(this.height);this.activated&&(i=N.adjustBrightness(t.fillColor,25)),this._bg.clear(),this._bg.beginFill(i,t.fillAlpha),this._bg.drawRect(e,a,h,s),this._bg.update(),this._light.clear(),this._light.beginStroke(1,t.lineColor,t.lineAlpha),this._light.beginFill(i),this._light.drawRect(e,a,h,s)}});var li=e(function(){B.call(this),this.activated=!1,this._bg=this.addChild(new W)},B);a(li.prototype,{update:function(){var t=this.config;this.visible=this.activated,this._bg.clear(),this.activated&&(this._bg.beginStroke(t.lineThickness,t.lineColor,t.lineAlpha),this._bg.beginFill(t.fillColor),this._bg.drawCircle(0,0,4)),this._bg.update(),B.prototype.update.call(this)}});var ci=e(function(){B.call(this),this._bg=this.addChild(new W),this._labelObject=this.addChild(new K),this.onOver=!1},B);a(ci.prototype,{update:function(){B.prototype.update.call(this);var t=this.config;this._labelObject.text=this.text,this._labelObject.x=18,this._labelObject.update();var a,i=this._labelObject.getRect(),e=9;this._bg.clear(),"line"==this.type?(this._bg.beginStroke(2,t.fillColor,t.fillAlpha),a=Math.round(i.height/2),this._bg.moveTo(0,a),this._bg.lineTo(12,a)):(this._bg.beginStroke(t.lineThickness,t.lineColor,t.lineAlpha),this._bg.beginFill(t.fillColor,t.fillAlpha),a=Math.max(0,Math.round((i.height-e)/2)),this._bg.drawRect(a,a,e,e)),this._bg.update()}});var ui=e(function(){B.call(this),this.text="",this._bg=this.addChild(new W),this._labelObject=this.addChild(new K)},B);a(ui.prototype,{update:function(){B.prototype.update.call(this),this._labelObject.text=this.text,this._labelObject.update();var t=this.config,i=this._labelObject.getRect(),e=10,a=Math.max(i.width+2*e,18),h=Math.max(i.height+2*e,12);this._labelObject.x=e,this._labelObject.y=e,this._labelObject.update(),this._bg.clear(),this._bg.beginStroke(t.borderThickness,t.borderColor,t.borderAlpha),this._bg.beginFill(t.backgroundColor,t.backgroundAlpha),this._bg.drawRect(0,0,a,h,5),this._bg.update()}});var di=e(function(){B.call(this),"svg"==p.type&&this._svgDefs(),this.title,this.lengend,this.tooltip,this.graphs=[],this.graphContainer=new B},B);a(di.prototype,{_newNode:function(){return p.newDocument("VCharts v"+r)},_svgDefs:function(){this.defs=this._dom.appendChild(p._newNode("defs"));var t=this.defs.appendChild(p._newNode("linearGradient"));t.id="gradient",v(t.appendChild(p._newNode("stop")),{offset:"0%","stop-color":"#ffffff","stop-opacity":.5}),v(t.appendChild(p._newNode("stop")),{offset:"70%","stop-color":"#ffffff","stop-opacity":0})},setSize:function(t,i){this.stageWidth=t,this.stageHeight=i},setDataSource:function(t){this._dataSource=t},setConfig:function(t){this._chartConfig=t},setData:function(t){this._chartData=t},updateChart:function(){if(this._dataSource)this._helper&&(this.removeChild(this._helper),this._helper=null),this._configChart(),this._refreshChart();else if(null==this._helper){this._helper=this.addChild(new K("No data")),this._helper.update();var t=this._helper.getRect();this._helper.x=(this.stageWidth-t.width)/2,this._helper.y=(this.stageHeight-t.height)/2,this._helper.update()}},_configChart:function(){var i,t=this._chartConfig;null==t.title?this.titleObject&&(this.removeChild(this.titleObject),this.titleObject=null):t.title&&(this.titleObject||(this.titleObject=new K,this.addChild(this.titleObject)),i=t.title,this.titleObject.text=i.text,this.titleObject.font=i.font,this.titleObject.fontSize=i.size,this.titleObject.color=i.color,this.titleObject.update()),null==t.legend?this.legend&&(this.removeChild(this.legend),this.legend=null):t.legend&&(this.legend||(this.legend=new ei(this),this.addChild(this.legend)),this.legend.config=t.legend)},_refreshChart:function(){this.graphArea=new D(0,0,this.stageWidth,this.stageHeight);var i,h,t=this._chartConfig;this.titleObject&&(i=t.title,this.titleObject.update(),h=this.titleObject.getRect(),this.graphArea.top=h.height+i.offset,this.titleObject.x=(this.stageWidth-h.width)/2,this.titleObject.y=0,this.titleObject.update(),this.legend&&(this.legend.refresh(),i=this.legend.config,h=this.legend.getRect(),this.graphArea.bottom-=h.height+i.offset))},_refreshLegend:function(){if(this.legend){var t=this.legend.config,i=this.legend.getRect(),e=(this.stageWidth-i.width)/2,a=this.graphArea.bottom+t.offset;this.legend.x=Math.round(e)+.5,this.legend.y=Math.round(a)+.5,this.legend.update()}}});var pi=e(function(){di.call(this),this.plot,this.plot=this.addChild(this._newPlot()),this.plot.x=.5,this.plot.y=.5,this.plot.update(),this.axisContainer=this.addChild(new B),this.axisContainer.x=.5,this.axisContainer.y=.5,this.axisContainer.update(),this.addChild(this.graphContainer)},di);a(pi.prototype,{_newPlot:function(){return null},_configChart:function(){di.prototype._configChart.call(this);var t=this._chartConfig;this.plot.config=t.plot}});var fi=e(function(){pi.call(this),this.repeatCount=0,this._top=0,this._bottom=0,this._left=0,this._right=0},pi);a(fi.prototype,{_newPlot:function(){return new ii(this)},_svgDefs:function(){pi.prototype._svgDefs.call(this),this.graphClip=p._newNode("clipPath"),this.graphClip.id="vcharts-graph-clip",this.defs.appendChild(this.graphClip),this.clipRect=new W,this.graphClip.appendChild(this.clipRect._dom)},_adjustAxes:function(t,i,e){for(var a=0,h=0,s=0,n=0;n<t.length;n++){var r=t[n];r.axisLength=this.plotArea.bottom-this.plotArea.top,r.refresh(),a=Math.max(a,r.backSpace,0),h=Math.max(h,r.frontSpace,0),0==r.config.labelInside&&(s+=r.config.offset+r.getRect().width),r.x=Math.round(this.plotArea.left-r.config.offset),r.y=Math.round(this.plotArea.top),r.update()}var o=0;for(n=0;n<i.length;n++)r=i[n],r.axisLength=this.plotArea.bottom-this.plotArea.top,r.refresh(),a=Math.max(a,r.backSpace,0),h=Math.max(h,r.frontSpace,0),0==r.config.labelInside&&(o+=r.config.offset+r.getRect().width),r.x=Math.round(this.plotArea.right+r.config.offset),r.y=Math.round(this.plotArea.top),r.update();var l=0,c=0,u=0,d=0;for(n=0;n<e.length;n++)r=e[n],r.axisLength=this.plotArea.right-this.plotArea.left,r.refresh(),l=Math.max(l,r.frontSpace,0),c=Math.max(c,r.backSpace,0),0==r.config.labelInside&&(d+=r.config.offset+r.getRect().height),r.x=Math.round(this.plotArea.left),r.y=Math.round(this.plotArea.bottom+r.config.offset),r.update();this._top=Math.max(u,a),this._bottom=Math.max(d,h),this._left=Math.max(s,l),this._right=Math.max(o,c)},_adjustPlotArea:function(t,i,e){var a=this._chartConfig;this._adjustAxes(t,i,e);var h=!1;this.plotArea.top<this.graphArea.top+this._top&&(this.plotArea.top=this.graphArea.top+this._top,h=!0),this.plotArea.left<this.graphArea.left+this._left&&(this.plotArea.left=this.graphArea.left+this._left,h=!0),this.plotArea.right>this.graphArea.right-this._right&&(this.plotArea.right=this.graphArea.right-this._right,this.plotArea.right<this.plotArea.left?(this.plotArea.right=this.plotArea.left,this.graphArea.right=this.plotArea.bottom+this._right,h=!1):h=!0),this.plotArea.bottom>this.graphArea.bottom-this._bottom&&(this.plotArea.bottom=this.graphArea.bottom-this._bottom,this.plotArea.bottom<this.plotArea.top?(this.plotArea.bottom=this.plotArea.top,this.graphArea.bottom=this.plotArea.bottom+this._bottom,h=!1):h=!0),a.autoMargins&&h&&this.repeatCount++<5?this._adjustPlotArea(t,i,e):(this._adjustAxes(t,i,e),this.repeatCount=0)},_adjustGraphArea:function(){var t=this.plotArea;this.clipRect&&(this.clipRect.clear(),this.clipRect.drawRect(0,0,t.right-t.left,t.bottom-t.top),this.clipRect.update())}});var gi=e(function(){di.call(this),this._legendData=null,this.addChild(this.graphContainer)},di);a(gi.prototype,{__init__:function(){di.prototype.__init__.call(this)},_configChart:function(){di.prototype._configChart.call(this);var t=this._chartConfig;this.graphs[0]||(this.graphs[0]=new J(this),this.graphContainer.addChild(this.graphs[0])),this.graphs[0].config=t.graph;var i=t.tooltip;this.tooltip&&(null==i||i&&i.type==this.tooltip.config.type),i&&(null==this.tooltip&&(this.tooltip=new hi(this),this.addChild(this.tooltip)),this.tooltip.config=i)},_refreshChart:function(){di.prototype._refreshChart.call(this),this.graphArea.bottom-=1;var t=this.graphs[0],i=t.config,e=this.graphArea,a=Math.min((e.right-e.left)/2,(e.bottom-e.top)/2);i.radius=2.1*a/3;var h=Math.round(this.stageWidth/2),s=Math.round((this.graphArea.bottom+this.graphArea.top)/2);t.x=h,t.y=s,t.update(),t.refresh(),this._refreshLegend(),this.tooltip&&(this.tooltip.x=h,this.tooltip.y=s,this.tooltip.update(),this.tooltip.refresh())}});var _i=e(function(){fi.call(this),this.serialAxis=null,this.areaGraphs=[],this.barGraphs=[],this.lineGraphs=[]},fi);a(_i.prototype,{_configChart:function(){fi.prototype._configChart.call(this);var t=this._chartConfig,e=(this._dataSource,this._chartData);this.serialAxis||(this.serialAxis=new Q(this),this.axisContainer.addChild(this.serialAxis)),this.serialAxis.config=t.serialAxis,this.valueAxis||(this.valueAxis=new Y(this),this.axisContainer.addChild(this.valueAxis)),this.valueAxis.config=t.valueAxes[0],this.valueAxis.data=e.valueAxes[0];this.serialAxis,t.serialKey;this.graphContainer.removeChildren(),this.graphs=[];for(var s=[],n=[],r=0;r<t.graphs.length;r++){var o;switch(t.graphs[r].type){case"column":case"bar":o=this.barGraphs.shift()||new $(this,this.valueAxis),s.push(o);break;case"line":o=this.lineGraphs.shift()||new ti(this,this.valueAxis),n.push(o);break;default:continue}o.config=t.graphs[r],this.graphs.push(o)}for(this.barGraphs=s,this.lineGraphs=n,r=0;r<this.barGraphs.length;r++){var l=this.barGraphs[r];l.graphCount=this.barGraphs.length,l.graphIndex=r,this.graphContainer.addChild(l)}for(r=0;r<this.lineGraphs.length;r++)o=this.lineGraphs[r],this.graphContainer.addChild(o);for(r=0;r<this.graphs.length;r++)o=this.graphs[r],o.config.fillColor=o.config.fillColor||t.colors[r%this.graphs.length];this.tooltip&&(this.tooltip.destroy(),this.removeChild(this.tooltip),this.tooltip=null),t.tooltip&&(null==this.tooltip&&(this.tooltip=new si(this),this.tooltip.x=.5,this.tooltip.y=.5,this.tooltip.update(),this.addChild(this.tooltip)),this.tooltip.config=t.tooltip)},_refreshChart:function(){fi.prototype._refreshChart.call(this);var t=this._chartConfig;if(t.inverted)i=this.serialAxis,e=this.valueAxis;else var i=this.serialAxis,e=this.valueAxis;i.direction="x",e.direction="y",this.plotArea=this.graphArea.clone(),this.plotArea.bottom-=1,this.plotArea.right-=1,this._adjustPlotArea([e],[],[i]),this._adjustGraphArea(),this.plot.refresh();var a=this.plotArea,h=Math.round(a.left)+.5,s=Math.round(a.top)+.5;this.graphContainer.x=h,this.graphContainer.y=s,this.graphContainer.update();for(var n=0;n<this.graphs.length;n++){var r=this.graphs[n];r.refresh()}this._refreshLegend(),this.tooltip&&this.tooltip.refresh()}});var vi=function(t){this.context=t};a(vi.prototype,{onStage:function(){if(this.initialized)return console.log("已初始化！"),void 0;var t=this.context.element;for(this._chartView=this._newChart(this.context.type);t.lastChild;)t.removeChild(t.lastChild);t.appendChild(this._chartView._dom),t=null,this.initialized=!0,this._readyCallback()},_newChart:function(t){switch(t){case"pie":return new gi;case"serial":return new _i}return null},_readyCallback:function(){function e(){(t._width!=i.clientWidth||t._height!=i.clientHeight)&&(t._width=i.clientWidth,t._height=i.clientHeight,t._chartView.setSize(i.clientWidth,i.clientHeight),t._chartView.updateChart())}var t=this,i=this.context.element;this._width=i.clientWidth,this._height=i.clientHeight,this._chartView.setSize(i.clientWidth,i.clientHeight),setInterval(e,2e3),this._dataSource&&(this._chartView.setDataSource(this._dataSource),this._dataSource=null),this._chartConfig&&(this._chartView.setConfig(this._chartConfig),this._chartConfig=null),this._chartData&&(this._chartView.setData(this._chartData),this._chartData=null),this._needRefresh&&(this._chartView.updateChart(),this._needRefresh=!1)},setDataSource:function(t){this.initialized?this._chartView.setDataSource(t):this._dataSource=t},setConfig:function(t){this.initialized?this._chartView.setConfig(t):this._chartConfig=t},setData:function(t){this.initialized&&this._chartView.setData(t)},update:function(){this.initialized?this._chartView.updateChart():this._needRefresh=!0}});var mi=function(t){function e(){f(t)&&(i.element=_(t)),i.element&&(i.initialized=!0,i.setSize(i._width||i.element.style.width||320,i._height||i.element.style.height||160),i._viewProxy.onStage())}this.element=t,this._viewProxy=new vi(this);var i=this;h.body?e():j.addHandler(s,"load",e)};a(mi.prototype,{setData:function(t){return this._dataSource=t,this._render(),this},setConfig:function(t){for(var i in t)switch(i){case"title":case"legend":case"serialAxis":case"tooltip":case"plot":this._chartConfig[i]&&null!=t[i]?m(this._chartConfig[i],t[i]):this._chartConfig[i]=t[i];break;case"graph":this._chartConfig[i]?m(this._chartConfig[i],t[i]):this._chartConfig[i]=t[i];break;case"valueAxes":for(var e=0;e<t[i].length;e++){var a=G.newValueAxis();m(a,t[i][e]),this._chartConfig[i][e]=a}for(;this._chartConfig[i].length>e;)this._chartConfig[i].pop();break;case"graphs":for(var e=0;e<t[i].length;e++)a=G.newSerialGraph(),m(a,t[i][e]),this._chartConfig[i][e]=a;for(;this._chartConfig[i].length>e;)this._chartConfig[i].pop();break;default:this._chartConfig[i]=t[i]}return this._render(),this},setSize:function(t,i){return this._width=t,this._height=i,this.initialized&&("number"==typeof t&&(t+="px"),"number"==typeof i&&(i+="px"),this.element.style.width=t,this.element.style.height=i),this._render(),this},_render:function(){if(this.initialized&&void 0==this.timerIndex){var t=this;this.timerIndex=setTimeout(function(){t.__onTimer()},33)}},__onTimer:function(){clearTimeout(this.timerIndex),this.timerIndex=void 0,this._parseConfig(),this._dataSource&&this._parseData(),this._viewProxy.setDataSource(this._dataSource),this._viewProxy.setConfig(this._chartConfig),this._viewProxy.update()},_parseConfig:function(){},_parseData:function(){}});var bi=e(function(t){mi.call(this,t)},mi);a(bi.prototype,{_parseConfig:function(){mi.prototype._parseConfig.call(this);var t=this._chartConfig;t.colors&&t.colors.length>0||(t.colors=N.createHueColors(t.graphs.length))},_parseData:function(){mi.prototype._parseData.call(this);var t=this._chartConfig,i=t.graphs;this._legendData=[];for(var e=0;e<i.length;e++)this._legendData.push({name:i[e].name,type:i[e].type,color:t.colors[e%t.colors.length]})}});var xi=e(function(t){bi.call(this,t)},bi);a(xi.prototype,{});var Ci=e(function(t){this.type="pie",this._chartConfig=G.newPieConfig(),mi.call(this,t),this.graph=null},mi);a(Ci.prototype,{_parseConfig:function(){mi.prototype._parseConfig.call(this);var t=this._chartConfig,i=this._dataSource;t.colors&&t.colors.length>0||(t.colors=N.createHueColors(i.length))},_parseData:function(){mi.prototype._parseData.call(this);var t=this._chartConfig,i=this._dataSource,e=0,a=[],h=0,s=[];for(var n in i){var r=i[n][t.valueKey]=Number(i[n][t.valueKey]);e+=r}if(e>0)for(n in i){var l,r=i[n][t.valueKey],o=r/e;l=o>0&&.01>o?.01*e:r,h+=l,a.push(l)}for(n=0;n<i.length;n++)s.push({name:i[n][t.labelKey],color:t.colors[n%t.colors.length]});this._viewProxy.setData({graphArr:a,graphTotalNum:h,legendArr:s})}});var yi=e(function(t){this.type="serial",this._chartConfig=G.newSerialConfig(),xi.call(this,t),this._startIndex=0,this._endIndex=Number.MAX_VALUE,this._serialCount=1},xi);a(yi.prototype,{_parseConfig:function(){xi.prototype._parseConfig.call(this);var t=this._chartConfig,i=t.valueAxes,e=t.graphs;if(1==i.length){i[0].valueKeys=[];for(var a=0;a<e.length;a++)switch(i[0].valueKeys[a]=e[a].valueKey,e[a].type){case"column":case"bar":i[0].minValue=0}}},_parseData:function(){xi.prototype._parseData.call(this);var t=this._chartConfig,i=this._dataSource;if(i){this._startIndex=0,this._endIndex=Math.max(this._startIndex,i.length-1),this._serialCount=Math.max(t.minSerialCount,i.length-this._startIndex);var e=new z(t.valueAxes[0]);e.parseData(i,t.valueAxes[0].valueKeys,this._startIndex,this._endIndex),this._viewProxy.setData({startIndex:this._startIndex,endIndex:this._endIndex,serialLength:this._serialCount,valueAxes:[{dataArr:e.axisData,min:e.minimum,max:e.maximum}],valueLines:e.axisData,legendArr:this._legendData})}}}),i.PieChart=Ci,i.SerialChart=yi,t.Ease=E,t.xmlRenderer=p,t.vcharts=i}(window);